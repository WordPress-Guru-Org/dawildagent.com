var box='',comments=!1,browser='',device_type='',resolution=window.screen.width+' x '+window.screen.height,new_task=[],task_screenshot=[],rightArrowParents=[],current_html_element='',relative_location={},html_element_location={},html_element_height=0,html_element_width=0,tasks_on_page=[],onload_wpfb_tasks=[],all_page_tasks_loaded=0,wpf_tasks_loaded=!1,all_backend_tasks_loaded=0,wpf_clean_dom_elem_path='',temp_tasks=[],wpf_tab_permission={user:!1,status:!1,priority:!1,screenshot:!1,information:!1,delete_task:'no',auto_screenshot:!1},wpf_reconnect_taskid='',wpf_reconnect=!1,wpf_reconnect_meta=[],wpf_tag_initialized=[],img_dwn_icon="",open_per=0,in_progress_per=0,pending_review_per=0,complete_per=0,total_task=0,current_popup=null,current_bubble=0,internal_icon_html='<span class="wpf_chevron_wrapper"><i class="gg-chevron-double-left"></i></span>',edit_comment_text="Update",cancel_edit_comment_text="Cancel",old_rendered_box_el;jQuery_WPF(document).ready(function(){jQuery_WPF('body').append('<div id="hidden-upgrade-popup-box" style="z-index:999"></div>'),jQuery_WPF('#hidden-upgrade-popup-box').load(logged_user.plugin_url+"inc/admin/upgrade-subscription-popup.php");var a=upgrade_url.url;if(jQuery_WPF(document).on('click','.wpf-uf-pop-wrapper, .wpf-uf-pop-container, .wpf-uf-close-popup',function(a){a.target==this&&(jQuery_WPF('.wpf-uf-pop-wrapper').hide(),jQuery_WPF('.wpf-uf-plan-title').text(''),jQuery_WPF('.wpf-uf-plan-detail').html(''),jQuery_WPF('.wpf-uf-plan-link').attr('href','#'))}),wpf_app_script_object.wpf_app_auto_task&&wpf_app_script_object.wpf_new_task&&setTimeout(function(){var a=['h1','img','h2','h3','h4','h5','h6'];jQuery_WPF.each(a,function(b,a){if(jQuery_WPF('body').find(a+':first').length)return enable_comment(),jQuery_WPF(a).trigger("click"),!1})},2e3),ajaxurl=ajaxurl.length>1?ajaxurl:wpf_app_script_object.ajaxurl,wpf_tab_permission.user=typeof wpf_tab_permission_user!='undefined'?wpf_tab_permission_user:null,wpf_tab_permission.priority=typeof wpf_tab_permission_priority!='undefined'?wpf_tab_permission_priority:null,wpf_tab_permission.status=typeof wpf_tab_permission_status!='undefined'?wpf_tab_permission_status:null,wpf_tab_permission.screenshot=typeof wpf_tab_permission_screenshot!='undefined'?wpf_tab_permission_screenshot:null,wpf_tab_permission.information=typeof wpf_tab_permission_information!='undefined'?wpf_tab_permission_information:null,wpf_tab_permission.delete_task=typeof wpf_tab_permission_delete_task!='undefined'?wpf_tab_permission_delete_task:null,wpf_tab_permission.auto_screenshot=typeof wpf_tab_permission_auto_screenshot!='undefined'?wpf_tab_permission_auto_screenshot:null,wpf_tab_permission.display_stickers=typeof wpf_tab_permission_display_stickers!='undefined'?wpf_tab_permission_display_stickers:null,wpf_tab_permission.display_task_id=typeof wpf_tab_permission_display_task_id!='undefined'?wpf_tab_permission_display_task_id:null,wpf_tab_permission.keyboard_shortcut=typeof wpf_tab_permission_keyboard_shortcut!='undefined'?wpf_tab_permission_keyboard_shortcut:null,img_dwn_icon="<span id='wpf_push_media' class='wpf_push_media wpf_image_download'>"+push_to_media_icon+"</span><span id='wpf_image_download' class='wpf_image_download' onclick='wpf_image_download_action(this)'>"+image_download_icon+"</span><span id='' class='wpf_image_open' onclick='wpf_image_open_new_tab(this)'>"+image_open_icon+"</span><span class='wpf_image_delete' onclick='wpf_task_image_delete(this)'>"+image_close_icon+"</span>",wpf_mark_internal_btn='<i class="gg-chevron-double-left"></i><span class="wpf_tooltiptext unmark_internal_tooltip_text">Switch to a normal task</span><span class="wpf_tooltiptext new_internal_tooltip_text">Add comment and create Internal task</span><span class="wpf_tooltiptext mark_internal_tooltip_text">Switch to an Internal task</span>',jQuery_WPF(document).on('click','.wpf_push_media',function(){let c=jQuery_WPF(this).parent().find('a').attr('href'),b=jQuery_WPF(this).parent().parent().parent().attr('id'),a=b.split("_")[2];jQuery_WPF.ajax({url:ajaxurl,type:'POST',data:{action:'wpf_is_internal_allowed'},beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(b){jQuery_WPF('.wpf_loader_'+a).hide(),b==1?jQuery_WPF('#pushed_to_media').show().delay(5e3).fadeOut():jQuery_WPF('#wpf_push_to_media_error_'+a).show().delay(5e3).fadeOut()}})}),jQuery_WPF(document).on('mouseenter','.wpf_task_number',function(){jQuery_WPF(this).find('span').hide()}),jQuery_WPF(document).on('mouseleave','.wpf_task_number',function(){jQuery_WPF(this).find('span').show()}),jQuery_WPF(document).on('change','.mark_as_complete_checkbox',function(){if(this.checked){let a=jQuery_WPF(this).attr('data-id'),b="complete";jQuery("#wpfbtaskstatus-"+a+" .anim-slider input").prop('checked',!1),jQuery("#wpfbtaskstatus-"+a+" .anim-slider .complete_radio").prop('checked',!0),set_task_status(a,b)}else{let a=jQuery_WPF(this).attr('data-id'),b="open";jQuery("#wpfbtaskstatus-"+a+" .anim-slider input").prop('checked',!1),jQuery("#wpfbtaskstatus-"+a+" .anim-slider .open_radio").prop('checked',!0),set_task_status(a,b)}}),wpf_tab_permission.keyboard_shortcut=='yes'){let a=!1;jQuery_WPF(document).on('keydown',function(c){const b=jQuery_WPF(c.target);if(!b.is('input')&&!b.is('textarea')&&!b.is('select')&&!b.is('.CodeMirror-code')&&!b.is('.block-editor-rich-text__editable'))if(a)switch(c.keyCode){case 66:typeof jQuery_WPF('body').find('.wpf-compact-launcher').attr('id')=='undefined'&&expand_bottom_bar();break;case 70:enable_comment();break;case 71:wpf_new_general_task(0);break;case 83:typeof jQuery_WPF('body').find('.wpf-compact-launcher').attr('id')=='undefined'?expand_sidebar():expand_compact_sidebar();break}else c.keyCode==16&&(a=!0)}).on('keyup',function(b){b.keyCode==16&&(a=!1)})}jQuery_WPF(document).on('mouseenter','.popover',function(a){jQuery_WPF(document).on('mouseenter','.popover',function(b){const a=jQuery_WPF('#'+jQuery_WPF(this).prop('id')).find('.nav-tabs').prop('id').split('myTab-');current_bubble=a[1]})}),jQuery_WPF(document).on('mouseenter','.wpf_wizard_modal',function(b){const a=jQuery_WPF(this).find('.nav-tabs').prop('id').split('myTab-');current_bubble=a[1]})}),old_rendered_box_el=null;function enable_comment(){var a,b;comments=!0,jQuery_WPF("#wpf_enable_comment").show(),jQuery_WPF("#wpf_panel").hide(),a=jQuery_WPF("#wpfb_display_tasks"),a.prop('checked')==!1&&a.prop('checked',!0),wpf_display_tasks(a),jQuery_WPF("a").each(function(){this.id!='disable_comment_a'&&jQuery_WPF(this).addClass('active_comment')}),jQuery_WPF('input[type="button"]').each(function(){this.id!='disable_comment_a'&&jQuery_WPF(this).addClass('active_comment')}),jQuery_WPF('form').each(function(){this.id!='disable_comment_a'&&jQuery_WPF(this).addClass('active_comment')}),wpf_reconnect==!0?(jQuery_WPF("a").each(function(){jQuery_WPF(this).removeClass('active_comment')}),jQuery_WPF('body').removeClass('active_comment'),jQuery_WPF('body').addClass('wpf_remap')):(jQuery_WPF('body').removeClass('wpf_remap'),jQuery_WPF('body').css('cursor','crosshair'),jQuery_WPF('a').css('cursor','crosshair')),jQuery_WPF('body').addClass('active_comment'),box=new Overlay(0,0,0,0),old_rendered_box_el!==null&&old_rendered_box_el.hide(),b=active_theme.theme,jQuery_WPF("body").mouseover(function(e){var a,c,d;comments==!0&&(a=jQuery_WPF(e.target),c=a.offset(),d=c.top,'Bricks'===b&&active_theme.logged&&(d=c.top-32),box.render(a.outerWidth(),a.outerHeight(),c.left,d),old_rendered_box_el=box)}),comments==!0&&(jQuery_WPF(this).addClass('wpf_enable_comment'),jQuery_WPF(document).on('keyup',function(a){a.keyCode==27&&(jQuery_WPF('#disable_comment_a').trigger('click'),wpf_reconnect=!1,wpf_reconnect_taskid='')}));const c='<span class="wpf_cursor_note" id="cursor_html"></span>';jQuery('body').append(c),jQuery(document).mousemove(function(a){var b={top:a.pageY+10,left:a.pageX+10};jQuery('#cursor_html')&&!jQuery('.wpf_comment_container').hasClass('show')?jQuery('#cursor_html').text("Click to leave a comment"):jQuery('#cursor_html').remove(),jQuery('#cursor_html').offset(b)}),typeof jQuery_WPF('body').find('.wpf-compact-launcher').attr('id')!='undefined'&&(jQuery_WPF('body').find('.wpf-compact-launcher .wpf_general_comment').addClass('active'),jQuery_WPF('body').find('.wpf-compact-launcher .comment_btn').attr('id','disable_comment_a'))}function disable_comment(){comments=!1,wpf_reconnect=!1,jQuery_WPF("#wpf_enable_comment").hide(),jQuery_WPF("#wpf_panel").show(),jQuery_WPF("a").each(function(){jQuery_WPF(this).removeClass('active_comment')}),jQuery_WPF('body').removeClass('active_comment'),jQuery_WPF('body').css('cursor','default'),jQuery_WPF('a').css('cursor','pointer'),box={},jQuery('#cursor_html')&&jQuery('#cursor_html').remove(),typeof jQuery_WPF('body').find('.wpf-compact-launcher').attr('id')!='undefined'&&(jQuery_WPF('body').find('.wpf-compact-launcher .wpf_general_comment').removeClass('active'),jQuery_WPF('body').find('.wpf-compact-launcher .comment_btn').removeAttr('id'))}function screenshot(a){const b=new Audio(wpf_screenshot_sound);tasks_on_page[a]>0?(b.play(),html2canvas(document.body,{x:window.scrollX,y:window.scrollY,width:window.innerWidth,height:window.innerHeight,useCORS:!0,proxy:plugin_url+'imagehelper.php',logging:!0}).then(function(b){var c=b.toDataURL('image/jpeg',1),d;task_screenshot.post_id=tasks_on_page[a],task_screenshot.task_config_author_name=current_user_name,task_screenshot.task_config_author_id=current_user_id,d=jQuery_WPF.extend({},task_screenshot),jQuery_WPF('body').addClass('wpfb_screenshot_class'),setTimeout(function(){jQuery_WPF('body').removeClass('wpfb_screenshot_class')},500),jQuery_WPF.ajax({url:ajaxurl,type:'POST',data:{action:'wpfb_save_screenshot',wpf_nonce,task_screenshot:d,image:c},beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(b){jQuery_WPF('.wpf_loader_'+a).hide();var c='<li class="wpf_author is_image"><level class="task-author">'+current_user_name+'</level><div class="meassage_area_main"><a href="'+b+'" download>'+img_dwn_icon+'</a><a href="'+b+'" target="_blank"><img src="'+b+'" /></a></div></li>';jQuery_WPF('#task_comments_'+a).append(c),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3)}})})):(jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('#wpf_task_error_'+a).show())}function new_task_screenshot(a){tasks_on_page[a]>0?html2canvas(document.body,{x:window.scrollX,y:window.scrollY,width:window.innerWidth,height:window.innerHeight,useCORS:!0,proxy:plugin_url+'imagehelper.php',logging:!0}).then(function(b){var c=b.toDataURL('image/jpeg',1),d;task_screenshot.post_id=tasks_on_page[a],task_screenshot.task_config_author_name=current_user_name,task_screenshot.task_config_author_id=current_user_id,d=jQuery_WPF.extend({},task_screenshot),jQuery_WPF.ajax({url:ajaxurl,type:'POST',data:{action:'wpfb_save_screenshot',wpf_nonce,task_screenshot:d,image:c,autoscreen:1},success:function(b){jQuery_WPF('#screenshot_img_'+a).parent().attr('href',b),jQuery_WPF('#screenshot_img_'+a).attr('src',b),jQuery_WPF('#screenshot_img_'+a).show()}})}):(jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('#wpf_task_error_'+a).show())}jQuery_WPF(window).on('load',function(){jQuery_WPF('#wpf_launcher .wpf_launch_buttons a').filter(function(){return this.hostname!=window.location.hostname}).removeAttr('target','_blank'),disable_for_admin==0&&(load_wpfb_tasks(),jQuery_WPF(function(){jQuery_WPF("#wpf_launcher > #wpf_launch_buttons_wrapper").draggable({containment:"body"})})),jQuery_WPF('a').click(function(a){jQuery_WPF(this).hasClass("active_comment")&&a.preventDefault()}),jQuery_WPF('a img').click(function(a){jQuery_WPF(this).parent().hasClass("active_comment")&&a.preventDefault()}),jQuery_WPF('input[type="button"]').click(function(a){if(jQuery_WPF(this).hasClass("active_comment"))return a.preventDefault(),!1}),jQuery_WPF("form").submit(function(a){comments==!0&&a.preventDefault()}),jQuery_WPF('.wpf_general_task_close').on('click',function(){jQuery_WPF('#wpf_general_comment_tabs').html(''),jQuery_WPF('#wpf_general_comment').hide()}),jQuery_WPF('#wpf_comment_mode_general_task svg').on('click',function(){wpf_new_general_task()}),jQuery_WPF('*').on('click',function(c){var i=jQuery_WPF(this).parents().addBack().not('html').length-1,g=0,h,b,e,a,f,d,j;if(this.id!="disable_comment_a")if(comments==!0){if(rightArrowParents=[],jQuery_WPF(this).hasClass("wpfb_task_bubble"))return jQuery_WPF('#wpf_already_comment').show().delay(5e3).fadeOut(),jQuery_WPF('#disable_comment_a').trigger('click'),jQuery_WPF('[rel="popover-'+jQuery_WPF(this).data('task_id')+'"]').trigger('click'),c.stopPropagation(),!1;if(jQuery_WPF(this).attr('id')=='wpf_launcher'||jQuery_WPF(this).hasClass("gg-math-plus")||jQuery_WPF(this).hasClass("wpf_start_comment")||jQuery_WPF(this).hasClass("comment_btn")||jQuery_WPF(this).attr('id')=='wpf_expand_btn')return jQuery_WPF('#disable_comment_a').trigger('click'),!1;if(jQuery_WPF(this).hasClass("wpf_none_comment"))return alert('Task cannot be created for this element'),!1;if(temp_tasks[comment_count]=[],curr_browser_temp=get_browser(),browser=curr_browser_temp.name+' '+curr_browser_temp.version,relative_location=mousePositionElement(c),temp_tasks[comment_count].relative_location=relative_location,html_element_location=getOffset(this),temp_tasks[comment_count].html_element_location=html_element_location,html_element_width=jQuery_WPF(this).width(),temp_tasks[comment_count].html_element_width=html_element_width,html_element_height=jQuery_WPF(this).height(),temp_tasks[comment_count].html_element_height=html_element_height,dompath=getDomPath(this),wpf_clean_dom_elem_path=dompath.join(' > '),temp_tasks[comment_count].wpf_clean_dom_elem_path=wpf_clean_dom_elem_path,jQuery_WPF(this).parents().addBack().not('html').each(function(){var a=this.tagName.toLowerCase(),b,f,c,d,e,h;if(a!='body')if(this.className){this.className=jQuery_WPF.trim(this.className),b=this.className.split(" "),f=/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/;for(c=0;c<b.length;c++)f.test(b[c])==!0&&(b[c]='');d=jQuery_WPF.trim(b.join(' ')),d=d.replace(/\s+/g,'.'),a+="."+d}current_html_element=a,temp_tasks[comment_count].current_html_element=current_html_element,g==i?(e=rightArrowParents.join(" > "),e=e+' > '+a,h=jQuery_WPF(this).index(e),rightArrowParents.push(a+':eq('+h+')')):rightArrowParents.push(a),g++}),temp_tasks[comment_count].rightArrowParents=rightArrowParents,wpf_reconnect==!0&&wpf_reconnect_taskid!='')return wpf_reconnect_meta.wpf_reconnect_taskid=wpf_reconnect_taskid,rightArrowParents=rightArrowParents.join(' > '),wpf_reconnect_meta.rightArrowParents=rightArrowParents,wpf_reconnect_meta.dompath=wpf_clean_dom_elem_path,wpf_reconnect_meta.html_element_height=html_element_height,wpf_reconnect_meta.html_element_width=html_element_width,h=jQuery_WPF.extend({},wpf_reconnect_meta),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'wpf_reconnect_task',wpf_nonce,new_reconnect_obj:h},beforeSend:function(){jQuery_WPF('#wpf_reconnecting_task').show()},success:function(b){jQuery_WPF('#wpf_reconnecting_task').show().delay(2e3).fadeOut();var a=getelementcenter(rightArrowParents);a.left=a.left-25,a.top=a.top-25,jQuery_WPF('#bubble-'+wpf_reconnect_tasknumber).attr('style','top:'+a.top+'px; left:'+a.left+'px;'),jQuery_WPF(rightArrowParents).addClass('wpfb_task_bubble')}}),wpf_reconnect=!1,wpf_reconnect_taskid='',disable_comment(),c.stopPropagation(),!1;b=JSON.parse(wpfb_users),e='<ul class="wp_feedback_filter_checkbox user">';for(a in b)b.hasOwnProperty(a)&&(f=b[a].first_name?b[a].first_name+' '+b[a].last_name:b[a].displayname,current_user_id==a||wpf_website_builder==a?e+='<li><input type="checkbox" name="author_list_'+comment_count+'" value="'+a+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+comment_count+'" id="author_list_'+comment_count+'_'+a+'" data-wp-usrn="'+b[a].username+'" checked><label for="author_list_'+comment_count+'_'+a+'" class="wpf_checkbox_label">'+f+'</label></li>':e+='<li><input type="checkbox" name="author_list_'+comment_count+'" value="'+a+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+comment_count+'" id="author_list_'+comment_count+'_'+a+'" data-wp-usrn="'+b[a].username+'"><label for="author_list_'+comment_count+'_'+a+'" class="wpf_checkbox_label">'+f+'</label></li>');e+='</ul>',d=getelementcenter(rightArrowParents.join(" > ")),d.left=d.left-25,d.top=d.top-25,jQuery_WPF(rightArrowParents.join(" > ")).addClass('wpfb_task_bubble'),jQuery_WPF(rightArrowParents.join(" > ")).attr('data-task_id',comment_count),j=wpf_task_popover_html(1,comment_count,0,'',e,'','','',1),jQuery_WPF('#wpf_launcher').after(j),init_custom_popover(comment_count),tasks_on_page[comment_count]=0,comment_count++,bubble_comment_count++,c.preventDefault()}comments==!0&&(disable_comment(),c.stopPropagation())})});function set_task_prioirty(a){var c,b,e;console.log(a),a=current_bubble,c=[],b=jQuery_WPF('input[name=wpfbpriority'+a+']:checked').val();let d='';c.task_id=tasks_on_page[a],c.task_priority=b,c.method='priority',e=jQuery_WPF.extend({},c),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_set_task_priority",wpf_nonce,task_info:e},beforeSend:function(){jQuery_WPF('.wpf_loader_'+current_bubble).show()},success:function(e){console.log(e),jQuery_WPF('.wpf_loader_'+current_bubble).hide(),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number").removeClass('low').removeClass('medium').removeClass('high').removeClass('critical'),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number").addClass(b),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number").find('span.sticker').removeAttr('class').addClass('sticker'),wpf_tab_permission.display_stickers=='yes'&&(d=b+'_custom',jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number").find('span.sticker').addClass(b).addClass(d).addClass('sticker'),jQuery_WPF('#bubble-'+a+'  span.sticker').removeAttr('class').addClass('sticker'),jQuery_WPF('#bubble-'+a+'  span.sticker').addClass(b+'_custom')),e!=''&&jQuery_WPF(current_popup).find("#task_comments_"+a).append('<li class="wpf_other  is_info" data-comment_id=""><level class="task-author"><span>1 second ago</span></level><div class="meassage_area_main"><p class="chat_text">'+e+'</p></div></li>'),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']").closest('li').find('span.priority').attr('title','Priority : '+b);const c=jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']");c.hasClass('low')?c.removeClass('low'):c.hasClass('high')?c.removeClass('high'):c.hasClass('medium')?c.removeClass('medium'):c.removeClass('critical'),c.addClass(b),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3)}})}function set_task_status(a,f=''){var c,b,d,g,e;a=current_bubble,c=[],f!=''?(b=f):(b=jQuery_WPF('input[name=wpfbtaskstatus'+a+']:checked').val()),d=[],g=jQuery_WPF('#comment-'+a).val(),jQuery_WPF.each(jQuery_WPF('input[name=author_list_'+a+']:checked'),function(){d.push(jQuery_WPF(this).val())}),d=d.join(",");let h='';c.task_id=tasks_on_page[a],c.task_status=b,c.task_notify_users=d,c.method='status',e=jQuery_WPF.extend({},c),e=jQuery_WPF.extend({},c),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_set_task_status",wpf_nonce,task_info:e},beforeSend:function(){jQuery_WPF(current_popup).find('.wpf_loader_'+a).show()},success:function(f){var c,d,e;if(jQuery_WPF(current_popup).find('.wpf_loader_'+a).hide(),c="",wpf_tab_permission.display_stickers=='yes'&&(c=" "+b+"_custom"),jQuery_WPF('#wpf_mark_internal_'+a).hasClass('wpf_is_internal')?internal_icon=internal_icon_html:internal_icon='',d='<span class="wpf_bubble_num_wrapper">'+jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").attr("data-disp-id")+'</span>'+internal_icon,e='<span class="wpf_bubble_num_wrapper">'+jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").attr("data-disp-id")+'</span>',b=='complete'){let e='';wpf_tab_permission.display_task_id!='yes'?e='<i class="gg-check"></i>':e=d,jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'],#wpf_allpages [data-taskid='"+a+"'],#wpf_backend [data-taskid='"+a+"']").removeClass('open').removeClass('complete').removeClass('pending-review').removeClass('in-progress').removeClass('complete_custom').removeClass('open_custom').removeClass('pending-review_custom').removeClass('in-progress_custom'),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'],#wpf_allpages [data-taskid='"+a+"'],#wpf_backend [data-taskid='"+a+"']").addClass(b+c);let f=jQuery_WPF('input[name=wpfbpriority'+a+']:checked').val();wpf_tab_permission.display_stickers=='yes'?(jQuery_WPF('#bubble-'+a).html('<span class="sticker '+f+' '+f+'_custom"></span> '+e),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").html('<span class="sticker '+f+' '+f+'_custom"></span> '+e)):(jQuery_WPF('#bubble-'+a).html(e),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number,#wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").html(e)),jQuery_WPF('#bubble-'+a).removeClass('open').removeClass('complete').removeClass('pending-review').removeClass('in-progress').removeClass('complete_custom').removeClass('open_custom').removeClass('pending-review_custom').removeClass('in-progress_custom').addClass(b+' '+c),jQuery_WPF('#bubble-'+a).css('display',"block"),jQuery_WPF("#mark_complete_"+a).attr("checked",!0)}else{let f=jQuery_WPF('input[name=wpfbpriority'+a+']:checked').val();jQuery_WPF('#bubble-'+a).removeClass('open').removeClass('complete').removeClass('pending-review').removeClass('in-progress').removeClass('complete_custom').removeClass('open_custom').removeClass('pending-review_custom').removeClass('in-progress_custom').addClass(b+' '+c),jQuery_WPF('#bubble-'+a).find('.gg-check').remove(),jQuery_WPF('#bubble-'+a).find('span .'+f).length==0&&wpf_tab_permission.display_stickers=='yes'?jQuery_WPF('#bubble-'+a).html('<span class="sticker '+f+' '+f+'_custom"></span>'+d):jQuery_WPF('#bubble-'+a).html(d),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number, #wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").find('span .'+f).length==0&&wpf_tab_permission.display_stickers=='yes'?jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number, #wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").html('<span class="'+f+' '+f+'_custom"></span>'+e):jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number, #wpf_allpages [data-taskid='"+a+"'] .wpf_task_number,#wpf_backend [data-taskid='"+a+"'] .wpf_task_number").html(e),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']").removeClass('open').removeClass('complete').removeClass('pending-review').removeClass('in-progress').removeClass('complete_custom').removeClass('open_custom').removeClass('pending-review_custom').removeClass('in-progress_custom'),wpf_tab_permission.display_stickers=='yes'?jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']").addClass(b+' '+b+'_custom'):jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']").addClass(b),jQuery_WPF("#mark_complete_"+a).attr("checked",!1)}f!=''&&jQuery("#task_comments_"+a).append('<li class="wpf_other  is_info" data-comment_id=""><level class="task-author"><span>1 second ago</span></level><div class="meassage_area_main"><p class="chat_text">'+f+'</p></div></li>'),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'], #wpf_allpages [data-taskid='"+a+"']").closest('li').find('span.task_status').attr('title','Status : '+b),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3)}})}function set_task_notify_users(a){var c,b,d;a=current_bubble,c=[],b=[],jQuery_WPF.each(jQuery_WPF('input[name=author_list_'+a+']:checked'),function(){b.push(jQuery_WPF(this).val())}),b=b.join(","),c.task_id=tasks_on_page[a],c.task_notify_users=b,d=jQuery_WPF.extend({},c),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_set_task_notify_users",wpf_nonce,task_info:d},beforeSend:function(){jQuery_WPF(current_popup).find('.wpf_loader_'+a).show()},success:function(b){jQuery_WPF(current_popup).find('.wpf_loader_'+a).hide()}})}function wpfb_edit_comment(b){var a,c;id=current_bubble,a=[],a.comment_id=b,a.comment_content=jQuery_WPF("#wpfb-edit-comment-wrapper-"+b+" textarea").val(),c=jQuery_WPF.extend({},a),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_edit_comment",wpf_nonce,task_info:c},beforeSend:function(){jQuery_WPF(current_popup).find('.wpf_loader_'+id).show()},success:function(c){jQuery_WPF(current_popup).find('.wpf_loader_'+id).hide(),jQuery_WPF("#wpf-chat-text-"+b).text(a.comment_content),jQuery_WPF("#wpfb-edit-comment-wrapper-"+b).hide()}})}function wpf_edit_box_active(a){jQuery_WPF("#wpfb-edit-comment-wrapper-"+a).show()}function wpfb_cancel_edit_comment(a){jQuery_WPF("#wpfb-edit-comment-wrapper-"+a).hide()}function wpf_delete_comment(a){var b=[],c;b.comment_id=a,b.from_wp=!0,c=jQuery_WPF.extend({},b),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpf_delete_comment",wpf_nonce,task_info:c,current_user_id},beforeSend:function(){},success:function(b){b=JSON.parse(b),jQuery_WPF("#wpf-chat-text-"+a).html(b.comment),jQuery_WPF("#wpfb-edit-comment-wrapper-"+a).hide(),jQuery_WPF("#wpf-chat-text-"+a).closest('li.wpf_author').find('div.wpf-edit-delete-wrapper').remove()}})}function new_comment(a,b=0){if(tasks_on_page[a]!=0)if(b==1){jQuery_WPF('#wpf_mark_internal_'+a).hasClass('wpf_is_internal')?mark_internal(a,0):jQuery_WPF.ajax({url:ajaxurl,type:'POST',data:{action:'wpf_is_internal_allowed'},success:function(b){b=='false'?(jQuery_WPF('.wpf-uf-otheruser-notice').length>0&&jQuery_WPF('.wpf-uf-otheruser-notice').remove(),jQuery_WPF('.wpf-uf-popup-image img').attr('src','https://wpfeedback-image.s3.us-east-2.amazonaws.com/images/Internal+tasks.png'),jQuery_WPF('.wpf-uf-plan-title').text('Internal Tasks'),jQuery_WPF('.wpf-uf-plan-detail').html('Make it easy to collaborate with your team on tasks that your clients cannot see with internal tasks. Change the logo, icon and main color to give your clients’ a unique experience. <br>Available on <b>Starter</b>, <b>Expert</b> and <b>Agency</b>'),jQuery_WPF('.wpf-uf-plan-link').attr('href',upg_url+'&feature=internal'),jQuery_WPF('.wpf-uf-pop-wrapper').show()):mark_internal(a,1)}});return}if(jQuery_WPF('#popover-content-c'+a).parents('.popover').attr("data-html2canvas-ignore","true"),jQuery_WPF.trim(jQuery_WPF('textarea#comment-'+a).val()).length==0)return jQuery_WPF('textarea#comment-'+a).attr('style','border: 1px solid red;'),jQuery_WPF('textarea#comment-'+a).focus(),jQuery_WPF('#wpf_task_error_'+a).show(),jQuery_WPF('#wpf_error_'+a).hide(),!1;if(b==0)if(jQuery_WPF('input[name="author_list_'+a+'"]:checked').length>0);else return jQuery_WPF('#wpfbuser-tab-'+a).click(),jQuery_WPF('#wpf_task_error_'+a).hide(),jQuery_WPF('#wpf_error_'+a).show(),!1;tasks_on_page[a]==0?generate_task(a,b):generate_comment(a)}function mark_internal(a,d){var b,e,f,c;a=current_bubble,b=[],e=[],f=jQuery_WPF('#comment-'+a).val(),jQuery_WPF.each(jQuery_WPF('input[name=author_list_'+a+']:checked'),function(){e.push(jQuery_WPF(this).val())}),b.task_id=tasks_on_page[a],b.internal=d,c=jQuery_WPF.extend({},b),c=jQuery_WPF.extend({},b),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_mark_as_internal",wpf_nonce,task_info:c},beforeSend:function(){jQuery_WPF(document).find('.wpf_loader_'+a).show()},success:function(c){console.log(c);const e=JSON.parse(c);if(e.limit===!0)return;let b=jQuery_WPF(".wpf_sidebar_content #wpf_thispage [data-taskid="+a+"]");if(d=='1'){jQuery_WPF('#wpf_mark_internal_'+a).addClass('wpf_is_internal').removeClass('mark_internal_tooltip').addClass('unmark_internal_tooltip'),jQuery_WPF('#bubble-'+a).addClass('wpfb-internal'),jQuery_WPF('#bubble-'+a).append(internal_icon_html);const c=jQuery_WPF('#wpf_mark_internal_'+a).parents('.popover-body').find('#wpfbuser-'+a);console.log(jQuery_WPF(c).find('span').html()),jQuery_WPF(c).find('ul').hide(),jQuery_WPF(c).find('ul').before('<span class="wpf_hide_users_for_internal_tasks" id="wpf_success_wpf_share_page_link">Notifications for internal tasks are handled through your Agency Dashboard</span>'),jQuery_WPF(b).find(".wpf_task_type").length>0?jQuery_WPF(".wpf_sidebar_content #wpf_thispage [data-taskid="+a+"] .wpf_task_type").before('<span class="wpf_task_type" title="Task type">Internal</span>'):jQuery_WPF(b).find(".wpf_task_meta").before('<span class="wpf_task_type" title="Task type">Internal</span>')}else{jQuery_WPF('#wpf_mark_internal_'+a).removeClass('wpf_is_internal').removeClass('unmark_internal_tooltip').addClass('mark_internal_tooltip'),jQuery_WPF('#bubble-'+a).removeClass('wpfb-internal'),jQuery_WPF('#bubble-'+a).find('.wpf_chevron_wrapper').remove();const c=jQuery_WPF('#wpf_mark_internal_'+a).parents('.popover-body').find('#wpfbuser-'+a);console.log(jQuery_WPF(c).find('span').html()),jQuery_WPF(c).find('span').remove(),jQuery_WPF(c).find('ul').show(),jQuery_WPF(b).find(".wpf_task_type:first").remove()}jQuery_WPF(document).find('.wpf_loader_'+a).hide()}})}function generate_task(a,i){var j,f,b,g,d,e,c,h,k;typeof temp_tasks[a]!='undefined'&&(j=temp_tasks[a].rightArrowParents.join(" > ")),f=get_browser(),b=Array(),g=jQuery_WPF('input[name=wpfbpriority'+a+']:checked').val(),d=jQuery_WPF('input[name=wpfbtaskstatus'+a+']:checked').val(),e=[],c=jQuery_WPF('textarea#comment-'+a).val(),jQuery_WPF.each(jQuery_WPF('input[name=author_list_'+a+']:checked'),function(){e.push(jQuery_WPF(this).val())}),e=e.join(","),b.task_number=a,b.task_priority=g,b.task_status=d,b.task_config_author_browser=f.name,b.task_config_author_browserVersion=f.version,b.task_config_author_browserOS=f.OS,b.task_config_author_name=current_user_name,b.task_config_author_id=current_user_id,b.task_config_author_resX=window.screen.width,b.task_config_author_resY=window.screen.height,b.task_title=c,b.task_page_url=current_page_url,b.task_page_title=current_page_title,b.current_page_id=current_page_id,b.task_comment_message=c,b.task_notify_users=e,b.page_type=page_type,i==1&&(b.internal='1'),typeof temp_tasks[a]!='undefined'?(b.task_element_path=j,b.task_clean_dom_elem_path=temp_tasks[a].wpf_clean_dom_elem_path,b.task_element_html=temp_tasks[a].current_html_element,b.task_X=temp_tasks[a].relative_location.x,b.task_Y=temp_tasks[a].relative_location.y,b.task_elementX=temp_tasks[a].html_element_location.x,b.task_elementY=temp_tasks[a].html_element_location.y,b.task_relativeX='',b.task_relativeY='',b.task_element_height=temp_tasks[a].html_element_height,b.task_element_width=temp_tasks[a].html_element_width,fallback_link_check==1?b.task_type='element':current_page_id==''||current_page_id==0?b.task_type='general':b.task_type='element'):b.task_type='general',h=c,wpf_is_valid_url(c)==!0&&(is_video_Url(c)?h=wpf_is_valid_video_url(c):h=URLify(c)),k=jQuery_WPF.extend({},b),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpf_add_new_task",wpf_nonce,new_task:k},beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(f){var j,k,l,e,n,o,r,m,q,p,s,t;try{const a=JSON.parse(f);console.log(a)}catch(a){}if(jQuery_WPF('#wpf_total_task_number').text(function(b,a){return++a}),jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('#wpf_task_error_'+a).hide(),f!=0){if(tasks_on_page[a]=f,wpf_tab_permission.auto_screenshot=='yes'?(jQuery_WPF('.wpf_loader_'+a).hide(),new_task_screenshot(a)):jQuery_WPF('.wpf_loader_'+a).hide(),jQuery_WPF('#wpfbsysinfo_task_id-'+a).html(tasks_on_page[a]),wpf_tab_permission.display_stickers=='yes'?(j='<div class="wpf_task_label"><span class="task_status wpf_'+b.task_status+' wpf_'+b.task_status+'_custom">'+status_icon+'</span>',k='<span class="priority wpf_'+b.task_priority+' wpf_'+b.task_priority+'_custom">'+priority_icon+'</span></div>'):(j='<div class="wpf_task_label"><span class="task_status wpf_'+b.task_status+'">'+status_icon+'</span>',k='<span class="priority wpf_'+b.task_priority+'">'+priority_icon+'</span></div>'),l='',b.task_type=='general'?(e=bubble_comment_count,bubble_comment_count++):(e=bubble_comment_count-1),n='',wpf_tab_permission.display_task_id!='yes'?n='<i class="gg-check"></i>':n=e,i==1){o=internal_icon_html,jQuery_WPF('#bubble-'+a).append(o),jQuery_WPF('#wpf_mark_internal_'+a).addClass('wpf_is_internal').removeClass('new_internal_tooltip').addClass('unmark_internal_tooltip'),jQuery_WPF('#bubble-'+a).addClass('wpfb-internal');const b=jQuery_WPF('#wpf_mark_internal_'+a).parents('.popover-body').find('#wpfbuser-'+a);console.log(jQuery_WPF(b).find('span').html()),jQuery_WPF(b).find('ul').hide(),jQuery_WPF(b).find('ul').before('<span class="wpf_hide_users_for_internal_tasks" id="wpf_success_wpf_share_page_link">Notifications for internal tasks are handled through your Agency Dashboard</span>')}else{o='';const b=jQuery_WPF('#wpf_mark_internal_'+a).parents('.popover-body').find('#wpfbuser-'+a);console.log(jQuery_WPF(b).find('span').html()),jQuery_WPF(b).find('span').remove(),jQuery_WPF(b).find('ul').show()}let u='';b.task_status=='complete'?u=n:u='<span class="wpf_bubble_num_wrapper">'+e+'</span>',r=jQuery_WPF('#wpf_display_all_taskmeta').is(":checked"),r==!0&&(m='wpf_active');let v='';if(i&&(v='<span class="wpf_task_type" title="Task type">Internal</span>'),b.task_type=='general'){jQuery_WPF(document).find("#wpf_delete_container_"+a).on("click",".wpf_task_delete_btn",function(b){var a=jQuery_WPF(this).data('btn_elemid');jQuery_WPF('.wpfbsysinfo_delete_task_id_'+a).show()}),jQuery_WPF(document).find("#wpf_delete_container_"+a).on("click",".wpf_task_delete",function(c){var a=jQuery_WPF(this).data('elemid'),b=jQuery_WPF(this).data('taskid');wpf_delete_task(a,b),jQuery_WPF('#wpf_general_comment .wpf_general_task_close').trigger('click'),comment_count--});const b='<span class="wpf_task_type" title="Task type">General</span>';wpf_tab_permission.display_stickers=='yes'?jQuery_WPF('#wpf_thispage_container_today').prepend('<li class="current_page_general_task  '+d+' '+d+'_custom" data-taskid="'+a+'" data-postid="'+tasks_on_page[a]+'"><div class="wpf_task_number" data-disp-id="'+e+'"><span class="'+g+'_custom"></span>'+u+'</div><div class="wpf_task_sum"><level class="task-author">'+current_user_name+'<span>'+wpf_just_now+'</span></level><div class="current_page_task_list">'+c+'</div></div>'+v+''+b+'<div class="wpf_task_meta '+m+'"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details"><span class="wpf_task_type">'+wpf_general_tag+'</span>'+j+k+l+'</div></div></li>'):jQuery_WPF('#wpf_thispage_container_today').prepend('<li class="current_page_general_task '+d+'" data-taskid="'+a+'" data-postid="'+tasks_on_page[a]+'"><div class="wpf_task_number" data-disp-id="'+e+'">'+u+'</div><div class="wpf_task_sum"><level class="task-author">'+current_user_name+'<span>'+wpf_just_now+'</span></level><div class="current_page_task_list">'+c+'</div></div>'+v+''+b+'<div class="wpf_task_meta '+m+'"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details"><span class="wpf_task_type">'+wpf_general_tag+'</span>'+j+k+l+'</div></div></li>')}else wpf_tab_permission.display_stickers=='yes'?jQuery_WPF('#wpf_thispage_container_today').prepend('<li class="current_page_task '+d+' '+d+'_custom" data-taskid="'+a+'" data-postid="'+tasks_on_page[a]+'"><div class="wpf_task_number" data-disp-id="'+e+'"><span class="'+g+'_custom"></span>'+u+'</div><div class="wpf_task_sum"><level class="task-author">'+current_user_name+'<span>'+wpf_just_now+'</span></level><div class="current_page_task_list">'+c+'</div></div>'+v+'<div class="wpf_task_meta '+m+'"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+j+k+l+'</div></div></li>'):jQuery_WPF('#wpf_thispage_container_today').prepend('<li class="current_page_task '+d+'" data-taskid="'+a+'" data-postid="'+tasks_on_page[a]+'"><div class="wpf_task_number" data-disp-id="'+e+'">'+u+'</div><div class="wpf_task_sum"><level class="task-author">'+current_user_name+'<span>'+wpf_just_now+'</span></level><div class="current_page_task_list">'+c+'</div></div>'+v+'<div class="wpf_task_meta '+m+'"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+j+k+l+'</div></div></li>');img_dwn_icon="",q='<li class="wpf_author"><level class="task-author">'+current_user_name+' '+wpf_just_now+'</level><div class="meassage_area_main">'+img_dwn_icon+'<p class="chat_text">'+h+'</p></div></li>',jQuery_WPF('#task_comments_'+a).append(q),a==1&&wpf_current_role=='advisor'&&(p="",s="Awesome! you have just added your first task on the website. Let's start managing it from the dashboard. <a class='wpf_demo_cta' href='https://app.atarim.io/login' target='_blank'>Go to the Agency dashboard!!</a>",t="Atarim",p='<li class="wpf_other magic_msg_replied"><level class="task-author">'+t+' '+wpf_just_now+'</level><div class="meassage_area_main">'+img_dwn_icon+'<p class="chat_text">'+s+'</p></div></li>',setTimeout(function(){jQuery_WPF('#task_comments_'+a).append(p)},2e3)),jQuery_WPF('#wpf_delete_container_'+a).html('<span class="wpfbsysinfo_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_delete_btn" data-btn_elemid="'+f+'" style="color:red;"><i class="gg-trash"></i>'+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_delete_task_id_'+f+' wpf_hide" ><b>'+wpf_delete_conform_text1+'</b><br>'+wpf_delete_conform_text2+' <a href="javascript:void(0)" class="wpf_task_delete" data-taskid="'+f+'" data-elemid="'+a+'" style="color:red;">'+wpf_yes+'</a></p>'),jQuery_WPF('#comment-'+a).val(''),jQuery_WPF('.wpfbpriority').click(function(b){current_popup=jQuery_WPF(this).parents('.popover'),jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).parents('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_prioirty(a),console.log("p3"),b.stopImmediatePropagation()}),jQuery_WPF('.wpfbtaskstatus').click(function(b){jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_status(a),b.stopImmediatePropagation()}),jQuery_WPF('.wpfbtasknotifyusers').click(function(b){current_popup=jQuery_WPF(this).closest('.popover'),set_task_notify_users(a),b.stopImmediatePropagation()}),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3)}}})}function generate_comment(a){var c=Array(),g=jQuery_WPF('input[name=wpfbpriority'+a+']:checked').val(),f=jQuery_WPF('input[name=wpfbtaskstatus'+a+']:checked').val(),b=jQuery_WPF('textarea#comment-'+a).val(),d=b,e=[],h;jQuery_WPF.each(jQuery_WPF('input[name=author_list_'+a+']:checked'),function(){e.push(jQuery_WPF(this).val())}),e=e.join(","),c.task_id=tasks_on_page[a],c.wpf_user_id=current_user_id,c.user_id=current_user_id,c.task_comment_message=b,c.comment_content=b,c.is_note="0",wpf_is_valid_url(b)==!0?is_video_Url(b)?d=wpf_is_valid_video_url(b):d=URLify(b):d=URLify(b),h=jQuery_WPF.extend({},c),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'wpfb_add_comment',wpf_nonce,new_task:h},beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(e){let c=null;try{c=JSON.parse(e),console.log(c)}catch(a){}jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('.wpf_loader_'+a).hide();const b=c.data,h=`<div class="wpf-edit-delete-wrapper"><a href="javascript:void(0)" onclick="wpf_edit_box_active(${b.id})" class="wpf_edit_box_active" id="wpf_edit_box_active"><i class="gg-pen"></i></a><a href="javascript:void(0)" class="wpf_comment_delete_btn"  onclick="wpf_delete_comment(${b.id})" ><i class="gg-trash"></i></a></div>`;var i='<li class="wpf_author"><level class="task-author">'+current_user_name+' '+wpf_just_now+'</level><div class="meassage_area_main"><p class="chat_text" id="wpf-chat-text-'+b.id+'">'+d+'</p>'+h+'</div><div id="wpfb-edit-comment-wrapper-'+b.id+'" class="wpfb-edit-comment-wrapper"><textarea class="form-control wpfb-edit-comment" data-comment_id="'+b.id+'" placeholder="Edit the comment..." spellcheck="false">'+b.comment_content+'</textarea><button class="wpf_edit_comment_btn" onclick="wpfb_edit_comment('+b.id+')">'+edit_comment_text+'</button><a class="wpf-cancel-edit-comment" onclick="wpfb_cancel_edit_comment('+b.id+')" href="javascript:void(0)">'+cancel_edit_comment_text+'</a></div></li>';if(jQuery_WPF('#task_comments_'+a).append(i),jQuery_WPF('textarea#comment-'+a).val(''),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3),f=='complete'){let b='';wpf_tab_permission.display_stickers=='yes'&&(b=' <span class="'+g+'_custom"></span>'),jQuery_WPF('#bubble-'+a).html(a+b),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"'] .wpf_task_number").html(a+b),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"']").removeClass('complete').removeClass('open').removeClass('pending-review').removeClass('in-progress'),jQuery_WPF(document).find("#wpf_thispage [data-taskid='"+a+"']").addClass(f)}}})}function load_wpfb_tasks(){if(atarim_server_down=='true')return;current_page_id!=''?jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'load_wpfb_tasks',wpf_nonce,current_page_url,fallback_link_check,current_page_id,page_type},success:function(b){var c;if(jQuery_WPF('.wpf_page_loader').hide(),wpf_tasks_loaded=!0,jQuery_WPF('body #wpf_launcher').addClass("wpf_launcher_loaded"),onload_wpfb_tasks=JSON.parse(b),onload_wpfb_tasks!==''&&onload_wpfb_tasks!==null&&onload_wpfb_tasks!==void 0){const a=Object.keys(onload_wpfb_tasks).sort(timeSort);if(comment_count_initial=Object.keys(onload_wpfb_tasks).length,onload_wpfb_tasks.milestone){console.log(onload_wpfb_tasks.milestone);const a=onload_wpfb_tasks.milestone,b=`${milestone_clock_icon}
                            <div class="wpf_milestone_content">
                                <div class="wpf_countdown_title">${a.title}</div>
                                <div class="wpf_countdown_timer" id="wpf_countdown_timer">${a.countdown_text}</div>
                            </div>`;jQuery_WPF('#wpf_site_milestone').html(b),start_milestone_timer(a)}jQuery_WPF.each(a,function(b,a){if(onload_wpfb_tasks[a].is_internal=='1')if(wpf_current_role!='advisor')return;tasks_on_page[onload_wpfb_tasks[a].wpf_task_id]=a,onload_wpfb_tasks[a].task_status=="open"&&(open_per=open_per+1),onload_wpfb_tasks[a].task_status=="in-progress"&&(in_progress_per=in_progress_per+1),onload_wpfb_tasks[a].task_status=="pending-review"&&(pending_review_per=pending_review_per+1),onload_wpfb_tasks[a].task_status=="complete"&&(complete_per=complete_per+1),total_task=total_task+1,generate_wpfb_task_html(a,onload_wpfb_tasks[a]),jQuery_WPF(function(){jQuery_WPF("#bubble-"+onload_wpfb_tasks[a].wpf_task_id).draggable({containment:"document"})}),comment_count_initial--}),jQuery_WPF('#wpf_total_task_number').text(open_per+in_progress_per+pending_review_per).removeClass('wpf_hide'),open_per>0&&(open_per=open_per*100/total_task),in_progress_per>0&&(in_progress_per=in_progress_per*100/total_task),pending_review_per>0&&(pending_review_per=pending_review_per*100/total_task),complete_per>0&&(complete_per=complete_per*100/total_task),c=open_per/100*total_task+in_progress_per/100*total_task+pending_review_per/100*total_task,jQuery_WPF('.wpf_progress_bar #open_progress').css("width",parseFloat(open_per).toFixed(2)+'%'),jQuery_WPF('.wpf_progress_bar #inprogress_progress').css('width',parseFloat(in_progress_per).toFixed(2)+'%'),jQuery_WPF('.wpf_progress_bar #pending_progress').css('width',parseFloat(pending_review_per).toFixed(2)+'%'),jQuery_WPF('.wpf_progress_bar #completed_progress').css('width',parseFloat(complete_per).toFixed(2)+'%')}jQuery_WPF('.wpfbpriority').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_prioirty(b),console.log("p2"),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtaskstatus').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');console.log("p1"),jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_status(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtasknotifyusers').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');current_popup=jQuery_WPF(this).closest('.popover'),set_task_notify_users(b),a.stopImmediatePropagation()}),jQuery_WPF(document).on("click",".close",function(a){jQuery_WPF(this).parents(".popover").popover('hide')});let a=0;jQuery_WPF(document).on("click",".wpfb-point",function(b,c){if(current_bubble=jQuery_WPF(this).prop('id').split('bubble-')[1],a==1)return;jQuery_WPF(this).data('comments-available')&&(load_popover_content(this),a=1)}),jQuery_WPF('.wpf_task_delete_btn').click(function(){var a=jQuery_WPF(this).data('btn_taskid');jQuery_WPF('.wpfbsysinfo_delete_task_id_'+a).show()}),jQuery_WPF('.wpf_task_delete').click(function(){var a=jQuery_WPF(this).data('elemid'),b=jQuery_WPF(this).data('taskid');wpf_delete_task(a,b)}),jQuery_WPF(document).find("#wpf_thispage").on("click","li.current_page_task .wpf_task_sum",function(f){var a,e,c;jQuery_WPF('#wpf_thispage li.current_page_task .wpf_task_sum').parent().removeClass('wpf_active'),jQuery_WPF('#wpf_thispage li.current_page_general_task .wpf_task_sum').parent().removeClass('wpf_active'),jQuery_WPF(this).parent().addClass('wpf_active');let b,d=0;if(a=jQuery_WPF(this).parents().data('postid'),wpf_admin_bar==1){let c;typeof onload_wpfb_tasks[a]!='undefined'?c=onload_wpfb_tasks[a].wpfb_task_bubble:(c='',d=1);let h=c?c.substr(0,c.indexOf('>')):'',e=c?c.substr(c.indexOf('>')+1):'',f=e?e.substr(e.indexOf('>')+1):'',g=e?e.substr(0,e.indexOf('>')):'';if(g.indexOf("div:eq")>-1){let a=parseInt(g.match(/(\d+)/)[0])+1;b=f?h+" > div:eq("+a+") > "+f:''}else b=f?h+" > "+g+" > "+f:''}else typeof onload_wpfb_tasks[a]!='undefined'?b=onload_wpfb_tasks[a].wpfb_task_bubble:(b='',d=1);if(jQuery_WPF(document).find(b).length===0&&d==0){wpf_load_general_task(a,1);return}e=jQuery_WPF(this).parent().data('taskid'),jQuery_WPF('[rel="popover-'+e+'"]').trigger('click'),jQuery_WPF('html, body').animate({scrollTop:jQuery_WPF("#bubble-"+e).offset().top-200},200),c=jQuery_WPF("#wpfb_display_tasks"),c.prop('checked')==!1&&c.prop('checked',!0),wpf_display_tasks(c)}),jQuery_WPF(document).find("#wpf_thispage").on("click","li.current_page_task .wpf_task_number",function(a){return expand_sidebar(),jQuery_WPF('#wpf_reconnecting_enabled').show().delay(2e3).fadeOut(),wpf_reconnect_taskid=jQuery_WPF(this).parent().data('postid'),wpf_reconnect_tasknumber=jQuery_WPF(this).parent().data('taskid'),wpf_reconnect=!0,enable_comment(),event.stopPropagation(),!1}),jQuery_WPF(document).find("#wpf_thispage").on("click","li.current_page_general_task .wpf_task_sum",function(b){var a=jQuery_WPF(this).parents().data('postid');jQuery_WPF('#wpf_thispage li.current_page_task .wpf_task_sum').parent().removeClass('wpf_active'),jQuery_WPF('#wpf_thispage li.current_page_general_task .wpf_task_sum').parent().removeClass('wpf_active'),jQuery_WPF(this).parent().addClass('wpf_active'),wpf_load_general_task(a)}),jQuery_WPF(document).find("#wpf_thispage").on("click","li.current_page_general_task .wpf_task_number",function(a){return expand_sidebar(),jQuery_WPF('#wpf_reconnecting_enabled').show().delay(2e3).fadeOut(),wpf_reconnect_taskid=jQuery_WPF(this).parent().data('postid'),wpf_reconnect_tasknumber=jQuery_WPF(this).parent().data('taskid'),wpf_reconnect=!0,enable_comment(),event.stopPropagation(),!1}),jQuery_WPF(document).find("#wpf_allpages_container_today,#wpf_allpages_container_yesterday,#wpf_allpages_container_this_week,#wpf_allpages_container_this_month,#wpf_allpages_container_year,#wpf_allpages_container_other").on("click","li.current_page_task",function(b){var a=jQuery_WPF(this).attr('data-task_url');window.location.assign(a)}),jQuery_WPF(document).find("#wpf_backend_container_today,#wpf_backend_container_yesterday,#wpf_backend_container_this_week,#wpf_backend_container_this_month,#wpf_backend_container_year,#wpf_backend_container_other").on("click","li.current_page_task",function(b){var a=jQuery_WPF(this).attr('data-task_url');window.open(a)}),jQuery_WPF(document).find("#wpf_allpages_container_today,#wpf_allpages_container_yesterday,#wpf_allpages_container_this_week,#wpf_allpages_container_this_month,#wpf_allpages_container_year,#wpf_allpages_container_other").on("click","li.current_page_general_task",function(b){var a=jQuery_WPF(this).data('postid');wpf_load_general_task(a)}),jQuery_WPF(document).find("#wpf_backend_container_today,#wpf_backend_container_yesterday,#wpf_backend_container_this_week,#wpf_backend_container_this_month,#wpf_backend_container_year,#wpf_backend_container_other").on("click","li.current_page_general_task",function(b){var a=jQuery_WPF(this).data('postid');wpf_load_general_task(a)}),trigger_bubble_label()}}):wpf_get_page_id_by_url()}function wpf_get_page_id_by_url(){jQuery_WPF.ajax({url:ajaxurl,method:'POST',data:{action:'wpf_get_page_id_by_url',wpf_nonce,current_page_url:window.location.href},success:function(b){var a=JSON.parse(b);a.ID!=0&&(current_page_id=a.ID,current_page_url=window.location.href,current_page_title=a.post_title,load_wpfb_tasks())}})}function timeSort(a,b){return b-a}function generate_wpfb_task_html(v,a){var x,d,b,k,n,l,g,u,e,F,q,j,m,i,o,c,w,p,y,r,A,h,f,t,D,E,G;a.task_notify_users!==''&&a.task_notify_users!==null&&a.task_notify_users!==void 0?(x=a.task_notify_users.split(',')):(x=''),d=JSON.parse(wpfb_users),b=a.wpf_task_id;let C='',s='',B="";a.class!==""&&(B="_"+a.class),wpf_tab_permission.display_stickers=='yes'&&(s=a.task_status+'_custom'),wpf_tab_permission.display_stickers=='yes'&&(C='<span class="sticker '+a.task_priority+'_custom"></span> ');let z='';if(wpf_tab_permission.display_task_id!='yes'?z='<i class="gg-check"></i>':z=a.site_task_id,k='',n='',a.is_internal=='1'&&(k='',n='<span class="wpf_task_type" title="Task type">Internal</span>'),a.task_status=='complete'?(l=C+z):(l=C+'<span class="wpf_bubble_num_wrapper">'+a.site_task_id+'</span>'),g=a.wpf_tags,u='',e='',g){F=g.length,e='<div class="wpf_task_tags">';const a=Object.keys(g);q=1,jQuery_WPF.each(a,function(b,a){q==1?e+='<span class="wpf_task_tag">'+g[a].name+'</span>':F==q?u+=g[a].name:u+=g[a].name+', ',q++}),g.length>1&&(e+='<span class="wpf_task_tag_more" title="'+u+'">...</span>'),e+='</div>'}if(wpf_tab_permission.display_stickers=='yes'?(j='<div class="wpf_task_label"><span class="task_status wpf_'+a.task_status+' wpf_'+a.task_status+'_custom" title="Status: '+a.task_status+'">'+status_icon+'</span>',m='<span class="priority wpf_'+a.task_priority+' wpf_'+a.task_priority+'_custom" title="Priority: '+a.task_priority+'">'+priority_icon+'</span></div>'):(j='<div class="wpf_task_label"><span class="task_status wpf_'+a.task_status+'" title="Status: '+a.task_status+'">'+status_icon+'</span>',m='<span class="priority wpf_'+a.task_priority+'" title="Priority: '+a.task_priority+'">'+priority_icon+'</span></div>'),a.task_type=='general'||a.task_type=='email'){const c=a.task_type=='general'?wpf_general_tag:wpf_email_tag;i='<li class="current_page_general_task '+a.task_status+' '+s+' '+a.task_priority+'" data-taskid="'+b+'" data-postid="'+v+'"><div class="wpf_task_number '+a.task_status+'_custom" title="Remap the task to an element" data-disp-id="'+a.site_task_id+'">'+l+k+'</div><div class="wpf_task_sum"><level class="task-author">'+a.task_config_author_name+'<span>'+a.task_time+'</span></level><div class="current_page_task_list">'+a.task_title+'</div></div>'+n+'<span class="wpf_task_type" title="Task type">'+c+'</span><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details"><span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span>'+j+m+e+'</div></div></li>',jQuery_WPF("#wpf_thispage_container"+B).append(i)}else{o='<ul class="wp_feedback_filter_checkbox user">';for(c in d)d.hasOwnProperty(c)&&(w=d[c].displayname,x.includes(c)?o+='<li><input type="checkbox" name="author_list_'+b+'" value="'+c+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+b+'" id="author_list_'+b+'_'+c+'" data-wp-usrn="'+d[c].username+'" checked><label for="author_list_'+b+'_'+c+'" class="wpf_checkbox_label">'+w+'</label></li>':o+='<li><input type="checkbox" name="author_list_'+b+'" value="'+c+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+b+'" id="author_list_'+b+'_'+c+'" data-wp-usrn="'+d[c].username+'"><label for="author_list_'+b+'_'+c+'" class="wpf_checkbox_label">'+w+'</label></li>');o+='</ul>',p=temp_task_priority_medium=temp_task_priority_high=temp_task_priority_critical='',a.task_priority=='low'?p='checked':a.task_priority=='medium'?temp_task_priority_medium='checked':a.task_priority=='high'?temp_task_priority_high='checked':temp_task_priority_critical='checked',wpf_tab_permission.display_stickers=='yes'?(y='<input id="priority_low-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="low" class="wpfbpriority low_radio" '+p+'><label for="priority_low-'+b+'" class="low_label">'+wpf_priority_low+'</label><input id="priority_medium-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="medium" class="wpfbpriority medium_radio" '+temp_task_priority_medium+'><label for="priority_medium-'+b+'" class="medium_label">'+wpf_priority_medium+'</label><input id="priority_high-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="high" class="wpfbpriority high_radio" '+temp_task_priority_high+'><label for="priority_high-'+b+'" class="high_label">'+wpf_priority_high+'</label><input id="priority_critical-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="critical" class="wpfbpriority critical_radio" '+temp_task_priority_critical+'><label for="priority_critical-'+b+'" class="critical_label">'+wpf_priority_critical+'</label>'):(y='<input id="priority_low-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="low" class="wpfbpriority " '+p+'><label for="priority_low-'+b+'" class="">'+wpf_priority_low+'</label><input id="priority_medium-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="medium" class="wpfbpriority " '+temp_task_priority_medium+'><label for="priority_medium-'+b+'" class="">'+wpf_priority_medium+'</label><input id="priority_high-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="high" class="wpfbpriority " '+temp_task_priority_high+'><label for="priority_high-'+b+'" class="">'+wpf_priority_high+'</label><input id="priority_critical-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="critical" class="wpfbpriority " '+temp_task_priority_critical+'><label for="priority_critical-'+b+'" >'+wpf_priority_critical+'</label>'),r=temp_task_status_inprogress=temp_task_status_pending_review=temp_task_status_complete='',a.task_status=='open'?r='checked':a.task_status=='in-progress'?temp_task_status_inprogress='checked':a.task_status=='pending-review'?temp_task_status_pending_review='checked':temp_task_status_complete='checked',wpf_tab_permission.display_stickers=='yes'?(A='<input id="status_open-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="open" data-elemid="'+b+'" class="wpfbtaskstatus open_radio" '+r+'><label for="status_open-'+b+'" class="open_label">'+wpf_status_open_task+'</label><input id="status_progress-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="in-progress" data-elemid="'+b+'" class="wpfbtaskstatus in_progress_radio" '+temp_task_status_inprogress+' ><label for="status_progress-'+b+'" class="in_progress_label">'+wpf_status_in_progress+'</label><input id="status_pending-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="pending-review" data-elemid="'+b+'" class="wpfbtaskstatus pending_radio" '+temp_task_status_pending_review+' ><label for="status_pending-'+b+'" class="pending_label">'+wpf_status_pending_review+'</label><input id="status_complete-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="complete" data-elemid="'+b+'" class="wpfbtaskstatus complete_radio" '+temp_task_status_complete+'><label for="status_complete-'+b+'" class="complete_label">'+wpf_status_complete+'</label>'):(A='<input id="status_open-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="open" data-elemid="'+b+'" class="wpfbtaskstatus " '+r+'><label for="status_open-'+b+'" class="">'+wpf_status_open_task+'</label><input id="status_progress-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="in-progress" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_inprogress+' ><label for="status_progress-'+b+'" class="">'+wpf_status_in_progress+'</label><input id="status_pending-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="pending-review" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_pending_review+' ><label for="status_pending-'+b+'" class="">'+wpf_status_pending_review+'</label><input id="status_complete-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="complete" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_complete+'><label for="status_complete-'+b+'" class="">'+wpf_status_complete+'</label>'),h='';for(c in a.comments){let e="",d="";if(d=a.comments[c].author,a.comments[c].is_log==1&&(e=" is_info",d=""),typeof a.comments[c].response!='undefined'?a.comments[c].response.delivery_status==='incoming'?(f="wpf_other "+e):(f="wpf_author "+e):a.comments[c].wpf_user_id==a.current_user_id?(f="wpf_author "+e):(f="wpf_other "+e),t='',D='',a.comments[c].is_edited&&!a.comments[c].is_deleted?t='<span class="wpf-is-edited">(edited)<span class="wpf_tooltiptext edit_tooltip_text">'+a.comments[c].updated_at+'</span></span>':t='',eval(current_user_id)===eval(a.comments[c].wpf_user_id)&&!a.comments[c].is_log&&!a.comments[c].is_deleted&&(D=`<div class="wpf-edit-delete-wrapper"><a href="javascript:void(0)" onclick="wpf_edit_box_active(${c})" class="wpf_edit_box_active" id="wpf_edit_box_active"><i class="gg-pen"></i></a><a href="javascript:void(0)" class="wpf_comment_delete_btn"  onclick="wpf_delete_comment(${c})" ><i class="gg-trash"></i></a></div>`),a.comments[c].comment_type==0){let b="";h+='<li class="'+f+'" data-comment_id="'+c+'"><level class="task-author">'+d+'<span>'+a.comments[c].time+'</span>'+t+'</level><div class="meassage_area_main"><p id="wpf-chat-text-'+c+'" class="chat_text">'+URLify(a.comments[c].message)+'</p>'+D+'</div><div id="wpfb-edit-comment-wrapper-'+c+'" class="wpfb-edit-comment-wrapper"><textarea class="form-control wpfb-edit-comment" data-comment_id="'+c+'" placeholder="Edit the comment..." spellcheck="false">'+URLify(a.comments[c].message)+'</textarea><button class="wpf_edit_comment_btn" onclick="wpfb_edit_comment('+c+')">'+edit_comment_text+'</button><a class="wpf-cancel-edit-comment" onclick="wpfb_cancel_edit_comment('+c+')" href="javascript:void(0)">'+cancel_edit_comment_text+'</a></div></li>'}else if(a.comments[c].comment_type==3){let b="";h+='<li class="'+f+'" data-comment_id="'+c+'"><level class="task-author">'+d+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main">'+b+'<iframe width="100%" height="120" src="https://www.youtube.com/embed/'+a.comments[c].message+'"></iframe></div><div id="wpfb-edit-comment-wrapper-'+c+'" class="wpfb-edit-comment-wrapper"><textarea class="form-control wpfb-edit-comment" data-comment_id="'+c+'" placeholder="Edit the comment..." spellcheck="false">'+a.comments[c].message+'</textarea><button class="wpf_edit_comment_btn" onclick="wpfb_edit_comment('+c+')">'+edit_comment_text+'</button><a class="wpf-cancel-edit-comment" onclick="wpfb_cancel_edit_comment('+c+')" href="javascript:void(0)">'+cancel_edit_comment_text+'</a></div></li>'}else if(a.comments[c].comment_type==1)h+='<li class="'+f+' is_image" data-comment_id="'+c+'"><level class="task-author">'+d+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main"><a href="'+a.comments[c].message+'" target="_blank">'+'</a>'+img_dwn_icon+'<img src="'+a.comments[c].message+'" class="wpf_task_uploaded_image" /></div></li>';else{E=a.comments[c].message.split("/").pop();let b="";h+='<li class="'+f+' is_file" data-comment_id="'+c+'"><level class="task-author">'+d+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main">'+b+'<a href="'+a.comments[c].message+'" download="'+E+'" target="_blank"><i class="gg-software-download"></i> '+E+'</a></div></li>'}jQuery_WPF('#task_comments_'+b).append(h)}a.task_page_title==null&&(a.task_page_title=""),G="";for(c in d)if(d.hasOwnProperty(c))if(d[c].username==a.task_config_author_name){a.task_config_author_name=d[c].displayname;break}i='';const q='We could not find the original location of this task. You can remap it by clicking the task number';let g;try{if(jQuery_WPF(document).find(a.wpfb_task_bubble).length===0){let b=a.wpfb_task_bubble,f=b?b.substr(0,b.indexOf('>')):'',c=b?b.substr(b.indexOf('>')+1):'',d=c?c.substr(c.indexOf('>')+1):'',e=c?c.substr(0,c.indexOf('>')):'';if(e.indexOf("div:eq")>-1){let a=parseInt(e.match(/(\d+)/)[0])+1;g=d?f+" > div:eq("+a+") > "+d:''}else g=d?f+" > "+e+" > "+d:''}else g=a.wpfb_task_bubble}catch(a){}a.task_type==='element'&&jQuery_WPF(document).find(g).length===0?i='<li class="current_page_task '+a.task_status+' '+s+' '+a.task_priority+'" data-taskid="'+b+'" data-postid="'+v+'"><div data-disp-id="'+a.site_task_id+'" class="dd wpf_task_number" title="'+wpf_Remap_text+'">'+l+k+'</div><div class="wpf_task_sum"><level class="task-author">'+a.task_config_author_name+'<span>'+a.task_time+'</span><span class="note-tooltip" data-note-tooltip="'+q+'">!</span></level><div class="current_page_task_list">'+a.task_title+'</div><p class="note_task_become_general"></p></div>'+n+'<div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+j+m+e+'</div></div></li>':i='<li class="current_page_task '+a.task_status+' '+s+' '+a.task_priority+'" data-taskid="'+b+'" data-postid="'+v+'"><div data-disp-id="'+a.site_task_id+'" class="dd wpf_task_number" title="'+wpf_Remap_text+'">'+l+k+'</div><div class="wpf_task_sum"><level class="task-author">'+a.task_config_author_name+'<span>'+a.task_time+'</span></level><div class="current_page_task_list">'+a.task_title+'</div></div>'+n+'<div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+j+m+e+'</div></div></li>',jQuery_WPF("#wpf_thispage_container"+B).append(i),response_html_new=wpf_task_popover_html(0,b,v,a,o,y,A,h),jQuery_WPF('#wpf_launcher').after(response_html_new),wpf_bubble_tracker(b,a.task_clean_dom_elem_path),init_custom_popover_first(b)}}function wpf_generate_general_task_html(u,c,t=0){var p,d,a,j,g,b,h,l,o,i,n,f,k,e,m,r,q,s;c.task_notify_users!==''&&c.task_notify_users!==null&&c.task_notify_users!==void 0?(p=c.task_notify_users.split(',')):(p=''),d=JSON.parse(wpfb_users),a=c.wpf_task_id,j='<ul class="wp_feedback_filter_checkbox user">',g=[];for(b in d)d.hasOwnProperty(b)&&(console.log(b),h=d[b].displayname,p.includes(b)?g[b]='<li><input type="checkbox" name="author_list_'+a+'" value="'+b+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+a+'" id="author_list_'+a+'_'+b+'" data-wp-usrn="'+d[b].username+'" checked><label for="author_list_'+a+'_'+b+'" class="wpf_checkbox_label">'+h+'</label></li>':g[b]='<li><input type="checkbox" name="author_list_'+a+'" value="'+b+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+a+'" id="author_list_'+a+'_'+b+'" data-wp-usrn="'+d[b].username+'"><label for="author_list_'+a+'_'+b+'" class="wpf_checkbox_label">'+h+'</label></li>');for(b in d)d.hasOwnProperty(b)&&(console.log(b),h=d[b].displayname,c.task_notify_wpf_users.includes(eval(b))&&(g[b]='<li><input type="checkbox" name="author_list_'+a+'" value="'+b+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+a+'" id="author_list_'+a+'_'+b+'" data-wp-usrn="'+d[b].username+'" checked><label for="author_list_'+a+'_'+b+'" class="wpf_checkbox_label">'+h+'</label></li>'));j+=g.join('').toString(),console.log(g),j+='</ul>',l=temp_task_priority_medium=temp_task_priority_high=temp_task_priority_critical='',c.task_priority=='low'?l='checked':c.task_priority=='medium'?temp_task_priority_medium='checked':c.task_priority=='high'?temp_task_priority_high='checked':temp_task_priority_critical='checked',wpf_tab_permission.display_stickers=='yes'?(o='<input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority low_radio" '+l+'><label for="priority_low-'+a+'" class="low_label">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority medium_radio" '+temp_task_priority_medium+'><label for="priority_medium-'+a+'" class="medium_label">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority high_radio" '+temp_task_priority_high+'><label for="priority_high-'+a+'" class="high_label">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority critical_radio" '+temp_task_priority_critical+'><label for="priority_critical-'+a+'" class="critical_label">'+wpf_priority_critical+'</label>'):(o='<input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority" '+l+'><label for="priority_low-'+a+'">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority" '+temp_task_priority_medium+'><label for="priority_medium-'+a+'">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority" '+temp_task_priority_high+'><label for="priority_high-'+a+'">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority" '+temp_task_priority_critical+'><label for="priority_critical-'+a+'">'+wpf_priority_critical+'</label>'),i=temp_task_status_inprogress=temp_task_status_pending_review=temp_task_status_complete='',c.task_status=='open'?i='checked':c.task_status=='in-progress'?temp_task_status_inprogress='checked':c.task_status=='pending-review'?temp_task_status_pending_review='checked':temp_task_status_complete='checked',wpf_tab_permission.display_stickers=='yes'?(n='<input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus open_radio" '+i+'><label for="status_open-'+a+'" class="open_label">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus in_progress_radio" '+temp_task_status_inprogress+' ><label for="status_progress-'+a+'" class="in_progress_label">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus pending_radio" '+temp_task_status_pending_review+' ><label for="status_pending-'+a+'" class="pending_label">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus complete_radio" '+temp_task_status_complete+'><label for="status_complete-'+a+'" class="complete_label">'+wpf_status_complete+'</label>'):(n='<input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus" '+i+'><label for="status_open-'+a+'">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus" '+temp_task_status_inprogress+' ><label for="status_progress-'+a+'">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus" '+temp_task_status_pending_review+' ><label for="status_pending-'+a+'">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus" '+temp_task_status_complete+'><label for="status_complete-'+a+'">'+wpf_status_complete+'</label>'),f='';for(b in c.comments){for(k in d)if(d.hasOwnProperty(k))if(d[k].username==c.comments[b].author){c.comments[b].author=d[k].displayname;break}let g="",h="";if(h=c.comments[b].author,c.comments[b].is_log==1&&(g=" is_info",h=""),typeof c.comments[b].response!='undefined'?c.comments[b].response.delivery_status==='incoming'?(e="wpf_other "+g):(e="wpf_author "+g):c.comments[b].wpf_user_id==c.current_user_id?(e="wpf_author"+g):(e="wpf_other"+g),m='',r='',c.comments[b].is_edited&&!c.comments[b].is_deleted?m='<span class="wpf-is-edited">(edited)<span class="wpf_tooltiptext edit_tooltip_text">'+c.comments[b].updated_at+'</span></span>':m='',eval(current_user_id)===eval(c.comments[b].wpf_user_id)&&!c.comments[b].is_log&&!c.comments[b].is_deleted&&(r=`<div class="wpf-edit-delete-wrapper"><a href="javascript:void(0)" onclick="wpf_edit_box_active(${b})" class="wpf_edit_box_active" id="wpf_edit_box_active"><i class="gg-pen"></i></a><a href="javascript:void(0)" class="wpf_comment_delete_btn"  onclick="wpf_delete_comment(${b})" ><i class="gg-trash"></i></a></div>`),c.comments[b].comment_type==0){let a="";f+='<li class="'+e+'" data-comment_id="'+b+'"><level class="task-author">'+h+'<span>'+c.comments[b].time+'</span>'+m+'</level><div class="meassage_area_main">'+a+'<p id="wpf-chat-text-'+b+'" class="chat_text">'+URLify(c.comments[b].message)+'</p>'+r+'</div><div id="wpfb-edit-comment-wrapper-'+b+'" class="wpfb-edit-comment-wrapper"><textarea class="form-control wpfb-edit-comment" data-comment_id="'+b+'" placeholder="Edit the comment..." spellcheck="false">'+URLify(c.comments[b].message)+'</textarea><button class="wpf_edit_comment_btn" onclick="wpfb_edit_comment('+b+')">'+edit_comment_text+'</button><a class="wpf-cancel-edit-comment" onclick="wpfb_cancel_edit_comment('+b+')" href="javascript:void(0)">'+cancel_edit_comment_text+'</a></div></li>'}else if(c.comments[b].comment_type==1)f+='<li class="'+e+' is_image" data-comment_id="'+b+'"><level class="task-author">'+h+'<span>'+c.comments[b].time+'</span></level><div class="meassage_area_main">'+img_dwn_icon+'<a href="'+c.comments[b].message+'" target="_blank"><img src="'+c.comments[b].message+'" class="wpf_task_uploaded_image" title="WPF Screenshot" alt="WPF Screenshot"/></a></div></li>';else if(c.comments[b].comment_type==3){let a="";f+='<li class="'+e+'" data-comment_id="'+b+'"><level class="task-author">'+h+'<span>'+c.comments[b].time+'</span></level><div class="meassage_area_main">'+a+'<iframe width="100%" height="120" src="https://www.youtube.com/embed/'+c.comments[b].message+'"></iframe></div></li>'}else{let a="";q=c.comments[b].message.split("/").pop(),f+='<li class="'+e+' is_file" data-comment_id="'+b+'"><level class="task-author">'+c.comments[b].author+'<span>'+c.comments[b].time+'</span></level><div class="meassage_area_main">'+a+'<a href="'+c.comments[b].message+'" download="'+q+'" target="_blank"><i class="gg-software-download"></i> '+q+'</a></div></li>'}jQuery_WPF('#task_comments_'+a).append(f),console.log('#task_comments_'+c.task_comment_id)}s=wpf_task_popover_html(3,a,u,c,j,o,n,f,0,t),jQuery_WPF('#wpf_general_comment_tabs').html(s),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).children().length*200},2e3)}function wpf_task_popover_html(f,a,c,b,K,L,M,N,A,J){var B,j,o,w,q,v,u,t,g,d,i,D,H,G,z,l,k,x,E,h,y,e,C,p,n,r,s,F;let m;if(wpf_admin_bar==1&&A!=1&&J!=1){let a=b.wpfb_task_bubble,f=a?a.substr(0,a.indexOf('>')):'',c=a?a.substr(a.indexOf('>')+1):'',d=c?c.substr(c.indexOf('>')+1):'',e=c?c.substr(0,c.indexOf('>')):'';if(e.indexOf("div:eq")>-1){let a=parseInt(e.match(/(\d+)/)[0])+1;m=d?f+" > div:eq("+a+") > "+d:''}else m=d?f+" > "+e+" > "+d:''}else m=b.wpfb_task_bubble;let I=0;try{jQuery_WPF(document).find(m).length==0&&(m=b.wpfb_task_bubble),I=jQuery_WPF(document).find(m).length}catch(a){}if(I===0&&A!=1&&J!=1)B="";else{if(j=b.wpf_tags,o=JSON.parse(wpfb_users),w=!1,wpf_tag_html='',j){const a=Object.keys(j);jQuery_WPF.each(a,function(b,a){wpf_tag_html+="<span class='wpf_tag_name "+j[a].slug+"'>"+j[a].name+"<a href='javascript:void(0)' onclick='wpf_delete_tag(\""+j[a].name+'","'+j[a].slug+'",'+c+")' data-tag_slug='"+j[a].slug+"'><i class='gg-close-o'></i></a></span>"})}if(q='',f==2||f==3?(curr_browser_temp=get_browser(),browser=curr_browser_temp.name+' '+curr_browser_temp.version,v=resolution,u=browser,t=current_user_name,c!=0?(g=c):(g='')):f==1&&(v=resolution,u=browser,t=current_user_name,g='',d=getelementcenter(rightArrowParents.join(" > ")),d.left=d.left-25,d.top=d.top-25),b&&(v=b.task_config_author_resX+' x '+b.task_config_author_resY,u=b.task_config_author_browser,t=b.task_config_author_name,g=c,d=getelementcenter(b.wpfb_task_bubble)),f==2||f==3)i='';else{b.task_status!='complete'&&(jQuery_WPF(b.task_element_path).addClass('wpfb_task_bubble'),jQuery_WPF(b.task_element_path).attr('data-task_id',b.task_comment_id)),d.left==0&&d.top==0?(data=c,jQuery_WPF(document).find('#popover-content-c'+a).remove(),jQuery_WPF(document).find('#currentpage_'+a).removeClass('current_page_task'),jQuery_WPF(document).find('#currentpage_'+a).addClass('current_page_general_task'),jQuery_WPF('#currentpage_'+a).attr('data-postid',c),jQuery_WPF(document).find('#currentpage_'+a+' level').append('<span>General</span>'),temp_task_text=data,D=jQuery_WPF("#wpf_thispage").find("[data-postid='"+c+"']"),jQuery_WPF(D).removeClass('current_page_task'),jQuery_WPF(D).addClass('current_page_general_task'),H=100*(b.task_elementX/b.task_config_author_resX),G=100*(b.task_elementY/b.task_config_author_resY),d.left=H*window.screen.width/100,d.top=G*window.screen.height/100,w=!0):(d.left=d.left-25,d.top=d.top-25);let e='';wpf_tab_permission.display_task_id!='yes'?e='<i class="gg-check"></i>':e=b.site_task_id,b.task_status=='complete'?(z=e):(z='<span class="wpf_bubble_num_wrapper">'+b.site_task_id+'</span>'),wpf_tab_permission.display_stickers=='yes'?(b.task_priority==void 0||b.task_priority==''?(l='<span class="sticker low low_custom" ></span>'):(l='<span class="sticker '+b.task_priority+' '+b.task_priority+'_custom" ></span>'),b.task_status==void 0||b.task_status==''?(k='open open_custom'):(k=b.task_status+'_custom')):(l='',k=''),f==1?w?(i=''):b.is_internal=='1'?(i='<a id="bubble-'+a+'" data-html2canvas-ignore="true" href="javascript:void(0)" rel="popover-'+a+'" data-html="true" data-trigger="focus" data-popover-content="#popover-content-c'+a+'" class="wpfb-point wpfb-internal '+q+' '+b.task_status+' '+k+'" style="top:'+d.top+'px;left:'+d.left+'px;" data-toggle="popover" data-disp-id="'+b.site_task_id+'" data-comments-available='+(typeof b.comments!='undefined')+'>'+l+'<span class="wpf_bubble_num_wrapper">'+bubble_comment_count+'</span><span class="wpf_chevron_wrapper"><i class="gg-chevron-double-left"></span></i></a>'):(i='<a id="bubble-'+a+'" data-html2canvas-ignore="true" href="javascript:void(0)" rel="popover-'+a+'" data-html="true" data-trigger="focus" data-popover-content="#popover-content-c'+a+'" class="wpfb-point '+q+' '+b.task_status+' '+k+'" style="top:'+d.top+'px;left:'+d.left+'px;" data-toggle="popover" data-disp-id="'+b.site_task_id+'" data-comments-available='+(typeof b.comments!='undefined')+'>'+l+'<span class="wpf_bubble_num_wrapper">'+bubble_comment_count+'</span></a>'):(wpf_show_front_stikers=='yes'?(x=''):(x='wpf_hide'),w?(i=''):b.is_internal=='1'?(i='<a id="bubble-'+a+'" data-html2canvas-ignore="true" href="javascript:void(0)" rel="popover-'+a+'" data-html="true" data-trigger="focus" data-popover-content="#popover-content-c'+a+'" class="wpfb-point wpfb-internal '+b.task_status+' '+x+' '+q+' '+k+'" style="top:'+d.top+'px;left:'+d.left+'px;" data-toggle="popover" data-disp-id="'+b.site_task_id+'" data-comments-available='+(typeof b.comments!='undefined')+'>'+l+z+'<span class="wpf_chevron_wrapper"><i class="gg-chevron-double-left"></i></span></a>'):(i='<a id="bubble-'+a+'" data-html2canvas-ignore="true" href="javascript:void(0)" rel="popover-'+a+'" data-html="true" data-trigger="focus" data-popover-content="#popover-content-c'+a+'" class="wpfb-point '+b.task_status+' '+x+' '+q+' '+k+'" style="top:'+d.top+'px;left:'+d.left+'px;" data-toggle="popover" data-disp-id="'+b.site_task_id+'" data-comments-available='+(typeof b.comments!='undefined')+'>'+l+z+'</a>'))}if(f==2||f==3?(E='<div class=""><div data-html2canvas-ignore="true" id="popover-content-c'+a+'"><div class="wpf_loader wpf_loader_'+a+' wpf_hide"></div>'):(E='<div class=""><div data-html2canvas-ignore="true" id="popover-content-c'+a+'" class="hide"><div class="wpf_loader wpf_loader_'+a+' wpf_hide"></div><a href="javascript:void(0)" onclick="close_popover('+a+');" class="close" data-dismiss="alert">&times;</a>'),h='<ul class="nav nav-tabs" id="myTab-'+a+'" role="tablist">',wpf_tab_permission.user=='yes'&&(h+='<li class="nav-item" title="Users"><a class="nav-link wpf_user_tab" id="wpfbuser-tab-'+a+'" data-toggle="tab" href="#wpfbuser-'+a+'" role="tab" aria-controls="wpfbuser" aria-selected="false">'+user_icon+'</a></li>'),wpf_tab_permission.priority=='yes'&&(h+='<li class="nav-item" title="Priority"><a class="nav-link wpf_prio_tab" id="wpfbpriority-tab-'+a+'" data-toggle="tab" href="#wpfbpriority-'+a+'" role="tab" aria-controls="wpfbpriority" aria-selected="false">'+priority_icon+'</a></li>'),wpf_tab_permission.status=='yes'&&(h+='<li class="nav-item" title="Status"><a class="nav-link wpf_stat_tab" id="wpfbtaskstatus-tab-'+a+'" data-toggle="tab" href="#wpfbtaskstatus-'+a+'" role="tab" aria-controls="wpfbtaskstatus" aria-selected="false">'+status_icon+'</a></li>'),wpf_tab_permission.screenshot=='yes'&&(h+='<li class="nav-item" title="Screenshots"><a class="nav-link wpf_scrn_tab" id="wpfbscreenshot-tab-'+a+'" data-toggle="tab" href="#wpfbscreenshot-'+a+'" role="tab" aria-controls="wpfbscreenshot" aria-selected="false">'+screen_short_icon+'</a></li>'),wpf_tab_permission.information=='yes'&&(h+='<li class="nav-item" title="'+wpf_additional_information+'"><a class="nav-link wpf_deta_tab" id="wpfbsysinfo-tab-'+a+'" data-toggle="tab" href="#wpfbsysinfo-'+a+'" role="tab" aria-controls="wpfbsysinfo" aria-selected="false">'+info_icon+'</a></li>'),h+='<li class="nav-item" title="'+wpf_share_task_link+'"><a class="nav-link wpf_deta_tab" id="sharetasklink-tab-'+a+'" data-toggle="tab" href="#sharetasklink-'+a+'" role="tab" aria-controls="sharetasklink" aria-selected="false">'+share_icon+'</a></li>',h+='</ul>',b.task_config_author_name!="undefined")for(y in o)if(o.hasOwnProperty(y))if(o[y].username==b.task_config_author_name){t=o[y].displayname;break}e='',(A==1||f!='')&&(e='<div class="tab-content" id="myTabContent-'+a+'">',C='',wpf_current_role=='advisor'&&(C='<div class="wpf_icon_title"><i class="gg-tag"></i> '+wpf_custom_tags+'</div><div class="wpf_tag_autocomplete"><input type="text" name="wpfeedback_tags" class="wpf_tag" value="" id="wpfeedback_tags_'+g+'" data-id="'+g+'" data-commentid="'+a+'" onkeydown="wpf_search_tags(this,'+g+')"><button class="wpf_tag_submit_btn" onclick="wpf_add_tag(\'wpfeedback_tags_'+g+'\')"><i class="gg-corner-down-left"></i></button></div><div id="all_tag_list_'+g+'">'+wpf_tag_html+'</div><div class="wpf_icon_title"> '+wpf_additional_information+'</div>'),e+='<div class="tab-pane" id="wpfbsysinfo-'+a+'" role="tabpanel" aria-labelledby="wpfbsysinfo-tab">'+C+'<ul><li><b>'+wpf_resolution+'</b> <span id="wpfbsysinfo_resolution-'+a+'">'+v+'</span></li><li><b>'+wpf_browser+'</b> <span id="wpfbsysinfo_browser-'+a+'">'+u+'</span></li><li><b>'+wpf_user_name+'</b> <span id="wpfbsysinfo_user_name-'+a+'">'+t+'</span></li><li><b>'+wpf_task_id+'</b> <span id="wpfbsysinfo_task_id-'+a+'">'+g+'</span></li>',f==1||f==2?e+='<li id="wpf_delete_container_'+a+'"><span class="wpfbsysinfo_temp_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_temp_delete_btn" style="color:red;" data-btn_elemid="'+a+'"  ><i class="gg-trash"></i> '+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_temp_delete_task_id_'+a+' wpf_hide" >'+wpf_delete_conform_text1+' '+wpf_delete_conform_text2+'<a href="javascript:void(0)" class="wpf_task_temp_delete" data-elemid="'+a+'" style="color:red;"> '+wpf_yes+'</a></p></li>':wpf_tab_permission.delete_task=='yes'?e+='<li><span class="wpfbsysinfo_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_delete_btn" data-btn_taskid="'+c+'" style="color:red;"><i class="gg-trash"></i>'+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_delete_task_id_'+c+' wpf_hide" ><b>'+wpf_delete_conform_text1+'</b><br>'+wpf_delete_conform_text2+' <a href="javascript:void(0)" class="wpf_task_delete" data-taskid="'+c+'" data-elemid="'+a+'" style="color:red;"><b>'+wpf_yes+'</b></a></p></li>':wpf_tab_permission.delete_task=='no'&&b.task_config_author_id==current_user_id&&(e+='<li><span class="wpfbsysinfo_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_delete_btn" data-btn_taskid="'+c+'" style="color:red;"><i class="gg-trash"></i> '+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_delete_task_id_'+c+' wpf_hide" ><b>'+wpf_delete_conform_text1+'</b><br>'+wpf_delete_conform_text2+' <a href="javascript:void(0)" class="wpf_task_delete" data-taskid="'+c+'" data-elemid="'+a+'" style="color:red;"><b>'+wpf_yes+'</b></a></p></li>'),e+='</ul></div>',f==3?c!=0?(p='<div class="wpf_task_link_'+c+'">',n=current_page_url+'?wpf_general_taskid='+c+'&wpf_login=1',r='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+c+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+c+'","general")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+c+'"> '+wpf_remove_login_parameter+'</label></div>'):(p='<div class="wpf_task_link_'+a+'">',n=current_page_url+'?wpf_general_taskid='+c+'&wpf_login=1',r='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+c+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+c+'","general")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+c+'"> '+wpf_remove_login_parameter+'</label></div>'):c!=0?(p='<div class="wpf_task_link_'+a+'">',n=current_page_url+'?wpf_taskid='+a+'&wpf_login=1',r='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+a+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+a+'","normal")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+a+'">'+wpf_remove_login_parameter+'</label></div>'):(r='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+a+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+a+'","normal")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+a+'">'+wpf_remove_login_parameter+'</label></div>',p='<div class="wpf_task_link_'+a+'">',n=current_page_url+'?wpf_taskid='+a+'&wpf_login=1'),e+='<div class="tab-pane" id="sharetasklink-'+a+'" role="tabpanel" aria-labelledby="sharetasklink-tab"><div class="wpf_icon_title">'+wpf_share_task_link+' </div><input type="text" id="wpf_share_link_'+c+'" value="'+n+'" style="position: absolute; z-index: -999; opacity: 0;"><span class="wpf_share_task_link">'+p+n+'</div><a href="javascript:void(0);" onclick=\'wpf_copy_to_clipboard("wpf_share_link_'+c+'")\' class="wpf_copy_task_icon" style="display: inline-block; color: var(--main-wpf-color) !important;"><i class="gg-copy"></i></a><span class="wpf_success_wpf_share_link" id="wpf_success_wpf_share_link_'+c+'" style="display: none;">The link was copied to your clipboard.</span></span>'+r+'</div>',e+='<div class="tab-pane" id="wpfbuser-'+a+'" role="tabpanel" aria-labelledby="home-tab">'+K+'</div>',s='',b.wpf_task_screenshot!=void 0?s='<a target="_blank" href="'+b.wpf_task_screenshot+'" class="wpf_screenshot_img_link"><img src="'+b.wpf_task_screenshot+'" id="screenshot_img_'+a+'" style="margin-top:10px; border:1px solid #dee2e6;padding: 5px;width: 100%;" /></a>':s='<a target="_blank" href="#" class="wpf_screenshot_img_link"><img src="#" id="screenshot_img_'+a+'" style="margin-top:10px; border:1px solid #dee2e6;padding: 5px; display: none;width: 100%;" /></a>',f==1||f==2?(wpf_tab_permission.display_stickers=='yes'?(e+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider"><input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority low_radio" checked><label for="priority_low-'+a+'" class="low_label">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority medium_radio"><label for="priority_medium-'+a+'" class="medium_label">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority high_radio"><label for="priority_high-'+a+'" class="high_label">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority critical_radio"><label for="priority_critical-'+a+'" class="critical_label">'+wpf_priority_critical+'</label></div></div>',e+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider"><input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus open_radio" checked><label for="status_open-'+a+'" class="open_label">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus in_progress_radio" ><label for="status_progress-'+a+'" class="in_progress_label">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus pending_radio" ><label for="status_pending-'+a+'" class="pending_label">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus complete_radio" ><label for="status_complete-'+a+'" class="complete_label">'+wpf_status_complete+'</label></div></div>'):(e+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider"><input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority" checked><label for="priority_low-'+a+'">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority"><label for="priority_medium-'+a+'">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority"><label for="priority_high-'+a+'">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority"><label for="priority_critical-'+a+'">'+wpf_priority_critical+'</label></div></div>',e+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider"><input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus" checked><label for="status_open-'+a+'">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_progress-'+a+'">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_pending-'+a+'">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_complete-'+a+'">'+wpf_status_complete+'</label></div></div>'),e+='<div class="tab-pane" id="wpfbscreenshot-'+a+'" role="tabpanel" aria-labelledby="wpfbscreenshot-tab"><a href="javascript:void(0)" onclick="screenshot('+a+');"><div class="wpf_screenshot_button">'+wpf_screenshot_view+'</div></a>'+s+'</div><div  id="task_comments_section_'+a+'"><ul class="wpf_current_chat_box scrollbar-outer" id="task_comments_'+a+'"></ul></div>'):(e+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider">'+L+'</div></div>',e+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider">'+M+'</div></div>',e+='<div class="tab-pane" id="wpfbscreenshot-'+a+'" role="tabpanel" aria-labelledby="wpfbscreenshot-tab"><a href="javascript:void(0)" onclick="screenshot('+a+');"><div class="wpf_screenshot_button">'+wpf_screenshot_view+'</div></a>'+s+'</div><div id="task_comments_section_'+a+'"><ul class="wpf_current_chat_box scrollbar-outer" id="task_comments_'+a+'">'+N+'</ul></div>'),e+='</div>');let m="",I="";b.task_status=='complete'&&(I='disabled="disabled"');const J=b.task_status==='complete'?"checked":"";m="<input type='checkbox' data-id='"+a+"' class='mark_as_complete_checkbox wpf_checkbox' id='mark_complete_"+a+"' "+I+" "+J+"><label class='mark_as_complete_lable wpf_checkbox_label' for='mark_complete_"+a+"'>Mark As Complete</label>",b.is_internal=='1'?internal_class=' wpf_is_internal':internal_class='',A==1?internal_tooltip_class=' new_internal_tooltip':b.is_internal=='1'?internal_tooltip_class=' unmark_internal_tooltip':b.is_internal!='1'&&(internal_tooltip_class=' mark_internal_tooltip'),wpf_current_role=='advisor'?internal_button='<button class="wpf_mark_internal'+internal_class+internal_tooltip_class+'" id="wpf_mark_internal_'+a+'" onclick="new_comment('+a+',1)">'+wpf_mark_internal_btn+'</button>':internal_button='',F='<div class="form-group"><textarea class="form-control" id="comment-'+a+'" placeholder="'+wpf_comment_box_placeholder+'"></textarea><span id="wpf_error_'+a+'" class="wpf_hide">'+wpf_task_text_error_msg+'</span><span id="wpf_task_error_'+a+'" class="wpf_hide">'+wpf_task_upload_error_msg+'</span><span id="wpf_push_to_media_error_'+a+'" class="wpf_hide">'+wpf_push_to_media_error_msg+'</span><div class="bottom_buttons">'+m+internal_button+'<button class="wpf_green_btn wpf_comment_btn" onclick="new_comment('+a+')">'+wpf_add_comment_btn+'</button></div><button class="wpf_upload_button"><input type="file" name="wpf_uploadfile_'+a+'" id="wpf_uploadfile_'+a+'" data-elemid="'+a+'" class="wpf_uploadfile"> <i class="gg-attachment"></i></button><p id="wpf_upload_error_'+a+'" class="wpf_hide">'+wpf_upload_invalid_file_msg+'</p></div></div></div>',B=i+E+h+e+F}return B}function load_popover_content(a){current_page_id!=''&&jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'load_wpfb_tasks',wpf_nonce,current_page_url,fallback_link_check,current_page_id,page_type},beforeSend:function(){jQuery_WPF(jQuery_WPF(a).attr('data-popover-content')).find('.wpf_loader').show()},success:function(b){var c;if(jQuery_WPF(jQuery_WPF(a).attr('data-popover-content')).find('.wpf_loader').hide(),wpf_tasks_loaded=!0,onload_wpfb_tasks=JSON.parse(b),onload_wpfb_tasks!==''&&onload_wpfb_tasks!==null&&onload_wpfb_tasks!==void 0){const a=Object.keys(onload_wpfb_tasks).sort(timeSort);comment_count_initial=Object.keys(onload_wpfb_tasks).length,jQuery_WPF.each(a,function(b,a){tasks_on_page[onload_wpfb_tasks[a].wpf_task_id]=a,jQuery_WPF("#bubble-"+onload_wpfb_tasks[a].wpf_task_id).data('comments-available')&&generate_popover_html(a,onload_wpfb_tasks[a]),jQuery_WPF(function(){jQuery_WPF("#bubble-"+onload_wpfb_tasks[a].wpf_task_id).draggable({containment:"document"})}),comment_count_initial--})}jQuery_WPF('.wpfbpriority').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');console.log("p22"),jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_prioirty(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtaskstatus').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_status(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtasknotifyusers').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');current_popup=jQuery_WPF(this).closest('.popover'),set_task_notify_users(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpf_task_delete_btn').click(function(){var a=jQuery_WPF(this).data('btn_taskid');jQuery_WPF('.wpfbsysinfo_delete_task_id_'+a).show()}),jQuery_WPF('.wpf_task_delete').click(function(){var a=jQuery_WPF(this).data('elemid'),b=jQuery_WPF(this).data('taskid');wpf_delete_task(a,b)})}})}function generate_popover_html(s,a){var t,d,b,l,F,G,g,n,i,E,q,r,k,e,u,h,c,x,m,z,o,B,j,f,p,w,v,H;a.task_notify_users!==''&&a.task_notify_users!==null&&a.task_notify_users!==void 0?(t=a.task_notify_users.split(',')):(t=''),d=JSON.parse(wpfb_users),b=a.wpf_task_id;let D='',C='',A="";a.class!==""&&(A="_"+a.class),wpf_tab_permission.display_stickers=='yes'&&(C=a.task_status+'_custom'),wpf_tab_permission.display_stickers=='yes'&&(D='<span class="sticker '+a.task_priority+'_custom"></span> ');let y='';if(wpf_tab_permission.display_task_id!='yes'?y='<i class="gg-check"></i>':y=a.site_task_id,a.task_status=='complete'?(l=D+y):(l=D+a.site_task_id),a.is_internal=='1'?(F=internal_icon_html,G='<span class="wpf_task_type" title="Task type">Internal</span>'):(F='',G=''),g=a.wpf_tags,n='',i='',g){E=g.length,i='<div class="wpf_task_tags">';const a=Object.keys(g);q=1,jQuery_WPF.each(a,function(b,a){q==1?i+='<span class="wpf_task_tag">'+g[a].name+'</span>':E==q?n+=g[a].name:n+=g[a].name+', ',q++}),g.length>1&&(i+='<span class="wpf_task_tag_more" title="'+n+'">...</span>'),i+='</div>'}wpf_tab_permission.display_stickers=='yes'?(r='<div class="wpf_task_label"><span class="task_status wpf_'+a.task_status+' wpf_'+a.task_status+'_custom" title="Status: '+a.task_status+'">'+status_icon+'</span>',k='<span class="priority wpf_'+a.task_priority+' wpf_'+a.task_priority+'_custom" title="Priority: '+a.task_priority+'">'+priority_icon+'</span></div>'):(r='<div class="wpf_task_label"><span class="task_status wpf_'+a.task_status+'" title="Status: '+a.task_status+'">'+status_icon+'</span>',k='<span class="priority wpf_'+a.task_priority+'" title="Priority: '+a.task_priority+'">'+priority_icon+'</span></div>');for(e in d)if(d.hasOwnProperty(e))if(d[e].username==a.task_config_author_name){a.task_config_author_name=d[e].displayname;break}if(a.task_type=='general'){let c=!1;jQuery_WPF("#wpf_thispage_container"+A).find('li').each(function(b,a){if(jQuery_WPF(a).attr('data-postid')==s){c=!0;return}}),c||(u='<li class="current_page_general_task '+a.task_status+' '+C+' '+a.task_priority+'" data-taskid="'+b+'" data-postid="'+s+'"><div class="wpf_task_number '+a.task_status+'_custom" title="Remap the task to an element" data-disp-id="'+a.site_task_id+'">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a.task_config_author_name+'<span>'+a.task_time+'</span></level><div class="current_page_task_list">'+a.task_title+'</div></div><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details"><span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span>'+r+k+i+'</div></div></li>',jQuery_WPF("#wpf_thispage_container"+A).append(u))}else{h='',a.is_internal==0?h='<ul class="wp_feedback_filter_checkbox user">':(h='<span class="wpf_hide_users_for_internal_tasks" id="wpf_success_wpf_share_page_link">Notifications for internal tasks are handled through your Agency Dashboard</span>',h+='<ul class="wp_feedback_filter_checkbox user wpf_hide">');for(c in d)d.hasOwnProperty(c)&&(x=d[c].displayname,t.includes(c)?h+='<li><input type="checkbox" name="author_list_'+b+'" value="'+c+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+b+'" id="author_list_'+b+'_'+c+'" data-wp-usrn="'+d[c].username+'" checked><label for="author_list_'+b+'_'+c+'" class="wpf_checkbox_label">'+x+'</label></li>':h+='<li><input type="checkbox" name="author_list_'+b+'" value="'+c+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+b+'" id="author_list_'+b+'_'+c+'" data-wp-usrn="'+d[c].username+'"><label for="author_list_'+b+'_'+c+'" class="wpf_checkbox_label">'+x+'</label></li>');h+='</ul>',m=temp_task_priority_medium=temp_task_priority_high=temp_task_priority_critical='',a.task_priority=='low'?m='checked':a.task_priority=='medium'?temp_task_priority_medium='checked':a.task_priority=='high'?temp_task_priority_high='checked':temp_task_priority_critical='checked',wpf_tab_permission.display_stickers=='yes'?(z='<input id="priority_low-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="low" class="wpfbpriority low_radio" '+m+'><label for="priority_low-'+b+'" class="low_label">'+wpf_priority_low+'</label><input id="priority_medium-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="medium" class="wpfbpriority medium_radio" '+temp_task_priority_medium+'><label for="priority_medium-'+b+'" class="medium_label">'+wpf_priority_medium+'</label><input id="priority_high-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="high" class="wpfbpriority high_radio" '+temp_task_priority_high+'><label for="priority_high-'+b+'" class="high_label">'+wpf_priority_high+'</label><input id="priority_critical-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="critical" class="wpfbpriority critical_radio" '+temp_task_priority_critical+'><label for="priority_critical-'+b+'" class="critical_label">'+wpf_priority_critical+'</label>'):(z='<input id="priority_low-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="low" class="wpfbpriority " '+m+'><label for="priority_low-'+b+'" class="">'+wpf_priority_low+'</label><input id="priority_medium-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="medium" class="wpfbpriority " '+temp_task_priority_medium+'><label for="priority_medium-'+b+'" class="">'+wpf_priority_medium+'</label><input id="priority_high-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="high" class="wpfbpriority " '+temp_task_priority_high+'><label for="priority_high-'+b+'" class="">'+wpf_priority_high+'</label><input id="priority_critical-'+b+'" type="radio" name="wpfbpriority'+b+'" data-elemid="'+b+'" value="critical" class="wpfbpriority " '+temp_task_priority_critical+'><label for="priority_critical-'+b+'" >'+wpf_priority_critical+'</label>'),o=temp_task_status_inprogress=temp_task_status_pending_review=temp_task_status_complete='',a.task_status=='open'?o='checked':a.task_status=='in-progress'?temp_task_status_inprogress='checked':a.task_status=='pending-review'?temp_task_status_pending_review='checked':temp_task_status_complete='checked',wpf_tab_permission.display_stickers=='yes'?(B='<input id="status_open-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="open" data-elemid="'+b+'" class="wpfbtaskstatus open_radio" '+o+'><label for="status_open-'+b+'" class="open_label">'+wpf_status_open_task+'</label><input id="status_progress-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="in-progress" data-elemid="'+b+'" class="wpfbtaskstatus in_progress_radio" '+temp_task_status_inprogress+' ><label for="status_progress-'+b+'" class="in_progress_label">'+wpf_status_in_progress+'</label><input id="status_pending-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="pending-review" data-elemid="'+b+'" class="wpfbtaskstatus pending_radio" '+temp_task_status_pending_review+' ><label for="status_pending-'+b+'" class="pending_label">'+wpf_status_pending_review+'</label><input id="status_complete-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="complete" data-elemid="'+b+'" class="wpfbtaskstatus complete_radio" '+temp_task_status_complete+'><label for="status_complete-'+b+'" class="complete_label">'+wpf_status_complete+'</label>'):(B='<input id="status_open-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="open" data-elemid="'+b+'" class="wpfbtaskstatus " '+o+'><label for="status_open-'+b+'" class="">'+wpf_status_open_task+'</label><input id="status_progress-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="in-progress" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_inprogress+' ><label for="status_progress-'+b+'" class="">'+wpf_status_in_progress+'</label><input id="status_pending-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="pending-review" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_pending_review+' ><label for="status_pending-'+b+'" class="">'+wpf_status_pending_review+'</label><input id="status_complete-'+b+'" type="radio" name="wpfbtaskstatus'+b+'" value="complete" data-elemid="'+b+'" class="wpfbtaskstatus " '+temp_task_status_complete+'><label for="status_complete-'+b+'" class="">'+wpf_status_complete+'</label>'),j='';for(c in a.comments){let g="",b="";b=a.comments[c].author;for(e in d)if(d.hasOwnProperty(e))if(d[e].username==a.comments[c].author){b=d[e].displayname;break}if(a.comments[c].is_log==1&&(g=" is_info",b=""),typeof a.comments[c].response!='undefined'?a.comments[c].response.delivery_status==='incoming'?(f="wpf_other "+g):(f="wpf_author "+g):a.comments[c].wpf_user_id==a.current_user_id?(f="wpf_author "+g):(f="wpf_other "+g),p='',w='',a.comments[c].is_edited&&!a.comments[c].is_deleted?p='<span class="wpf-is-edited">(edited)<span class="wpf_tooltiptext edit_tooltip_text">'+a.comments[c].updated_at+'</span></span>':p='',eval(current_user_id)===eval(a.comments[c].wpf_user_id)&&!a.comments[c].is_log&&!a.comments[c].is_deleted&&(w=`<div class="wpf-edit-delete-wrapper"><a href="javascript:void(0)" onclick="wpf_edit_box_active(${c})" class="wpf_edit_box_active" id="wpf_edit_box_active"><i class="gg-pen"></i></a><a href="javascript:void(0)" class="wpf_comment_delete_btn"  onclick="wpf_delete_comment(${c})" ><i class="gg-trash"></i></a></div>`),a.comments[c].comment_type==0){let d="";j+='<li class="'+f+'" data-comment_id="'+c+'"><level class="task-author">'+b+'<span>'+a.comments[c].time+'</span>'+w+'</level><div class="meassage_area_main"><p id="wpf-chat-text-'+c+'" class="chat_text">'+URLify(a.comments[c].message)+'</p>'+p+'</div><div id="wpfb-edit-comment-wrapper-'+c+'" class="wpfb-edit-comment-wrapper"><textarea class="form-control wpfb-edit-comment" data-comment_id="'+c+'" placeholder="Edit the comment..." spellcheck="false">'+URLify(a.comments[c].message)+'</textarea><button class="wpf_edit_comment_btn" onclick="wpfb_edit_comment('+c+')">'+edit_comment_text+'</button><a class="wpf-cancel-edit-comment" onclick="wpfb_cancel_edit_comment('+c+')" href="javascript:void(0)">'+cancel_edit_comment_text+'</a></div></li>'}else if(a.comments[c].comment_type==3){let d="";j+='<li class="'+f+'" data-comment_id="'+c+'"><level class="task-author">'+b+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main">'+d+'<iframe width="100%" height="120" src="https://www.youtube.com/embed/'+a.comments[c].message+'"></iframe></div></li>'}else if(a.comments[c].comment_type==1)j+='<li class="'+f+' is_image" data-comment_id="'+c+'"><level class="task-author">'+b+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main"><a href="'+a.comments[c].message+'" target="_blank">'+'</a>'+img_dwn_icon+'<img src="'+a.comments[c].message+'" class="wpf_task_uploaded_image" /></div></li>';else{v=a.comments[c].message.split("/").pop();let d="";j+='<li class="'+f+' is_file" data-comment_id="'+c+'"><level class="task-author">'+b+'<span>'+a.comments[c].time+'</span></level><div class="meassage_area_main">'+d+'<a href="'+a.comments[c].message+'" download="'+v+'" target="_blank"><i class="gg-software-download"></i> '+v+'</a></div></li>'}}a.task_page_title==null&&(a.task_page_title=""),H="",u='<li class="current_page_task '+a.task_status+' '+C+' '+a.task_priority+'" data-taskid="'+b+'" data-postid="'+s+'"><div class="wpf_task_number" title="'+wpf_Remap_text+'">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a.task_config_author_name+'<span>'+a.task_time+'</span></level><div class="current_page_task_list">'+a.task_title+'</div></div><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+r+k+i+'</div></div></li>',add_popover_content(0,b,s,a,h,z,B,j)}jQuery_WPF('#task_comments_'+a.wpf_task_id).animate({scrollTop:jQuery_WPF('#task_comments_'+a.wpf_task_id).prop("scrollHeight")},2e3)}function add_popover_content(f,a,b,d,s,r,q,p){var t='',m,n,l,e,h,c,o,j,g,i,k;f==2||f==3?(curr_browser_temp=get_browser(),browser=curr_browser_temp.name+' '+curr_browser_temp.version,m=resolution,n=browser,l=current_user_name,b!=0?(e=b):(e='')):f==1?(m=resolution,n=browser,l=current_user_name,e='',h=getelementcenter(rightArrowParents.join(" > ")),h.left=h.left-25,h.top=h.top-25):(m=d.task_config_author_resX+' x '+d.task_config_author_resY,n=d.task_config_author_browser,l=d.task_config_author_name,e=b,h=getelementcenter(d.wpfb_task_bubble)),console.log(d),c='<div class="tab-content" id="myTabContent-'+a+'">',o='',wpf_current_role=='advisor'&&(o='<div class="wpf_icon_title"><i class="gg-tag"></i> '+wpf_custom_tags+'</div><div class="wpf_tag_autocomplete"><input type="text" name="wpfeedback_tags" class="wpf_tag" value="" id="wpfeedback_tags_'+e+'" data-id="'+e+'" data-commentid="'+a+'" onkeydown="wpf_search_tags(this,'+e+')"><button class="wpf_tag_submit_btn" onclick="wpf_add_tag(\'wpfeedback_tags_'+e+'\')"><i class="gg-corner-down-left"></i></button></div><div id="all_tag_list_'+e+'">'+wpf_tag_html+'</div><div class="wpf_icon_title"> '+wpf_additional_information+'</div>'),c+='<div class="tab-pane" id="wpfbsysinfo-'+a+'" role="tabpanel" aria-labelledby="wpfbsysinfo-tab">'+o+'<ul><li><b>'+wpf_resolution+'</b> <span id="wpfbsysinfo_resolution-'+a+'">'+m+'</span></li><li><b>'+wpf_browser+'</b> <span id="wpfbsysinfo_browser-'+a+'">'+n+'</span></li><li><b>'+wpf_user_name+'</b> <span id="wpfbsysinfo_user_name-'+a+'">'+l+'</span></li><li><b>'+wpf_task_id+'</b> <span id="wpfbsysinfo_task_id-'+a+'">'+e+'</span></li>',f==1||f==2?c+='<li id="wpf_delete_container_'+a+'"><span class="wpfbsysinfo_temp_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_temp_delete_btn" style="color:red;" data-btn_elemid="'+a+'"  ><i class="gg-trash"></i> '+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_temp_delete_task_id_'+a+' wpf_hide" >'+wpf_delete_conform_text1+' '+wpf_delete_conform_text2+'<a href="javascript:void(0)" class="wpf_task_temp_delete" data-elemid="'+a+'" style="color:red;"> '+wpf_yes+'</a></p></li>':wpf_tab_permission.delete_task=='yes'?c+='<li><span class="wpfbsysinfo_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_delete_btn" data-btn_taskid="'+b+'" style="color:red;"><i class="gg-trash"></i>'+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_delete_task_id_'+b+' wpf_hide" ><b>'+wpf_delete_conform_text1+'</b><br>'+wpf_delete_conform_text2+' <a href="javascript:void(0)" class="wpf_task_delete" data-taskid="'+b+'" data-elemid="'+a+'" style="color:red;"><b>'+wpf_yes+'</b></a></p></li>':wpf_tab_permission.delete_task=='no'&&d.task_config_author_id==current_user_id&&(c+='<li><span class="wpfbsysinfo_delete_btn_task_id_'+a+'"><a href="javascript:void(0)" class="wpf_task_delete_btn" data-btn_taskid="'+b+'" style="color:red;"><i class="gg-trash"></i> '+wpf_delete_ticket+'</a></span><p class="wpfbsysinfo_delete_task_id_'+b+' wpf_hide" ><b>'+wpf_delete_conform_text1+'</b><br>'+wpf_delete_conform_text2+' <a href="javascript:void(0)" class="wpf_task_delete" data-taskid="'+b+'" data-elemid="'+a+'" style="color:red;"><b>'+wpf_yes+'</b></a></p></li>'),c+='</ul></div>',f==3?b!=0?(j='<div class="wpf_task_link_'+b+'">',g=current_page_url+'?wpf_general_taskid='+b+'&wpf_login=1',i='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+b+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+b+'","general")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+b+'"> '+wpf_remove_login_parameter+'</label></div>'):(j='<div class="wpf_task_link_">',g=current_page_url+'?wpf_general_taskid='+b+'&wpf_login=1',i='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+b+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+b+'","general")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+b+'"> '+wpf_remove_login_parameter+'</label></div>'):b!=0?(j='<div class="wpf_task_link_'+a+'">',g=current_page_url+'?wpf_taskid='+a+'&wpf_login=1',i='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+a+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+a+'","normal")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+a+'">'+wpf_remove_login_parameter+'</label></div>'):(i='<div class="wpf_remove_login_box"><input type="checkbox" id="wpf_remove_login_task_link'+a+'" class="wpf_remove_login_task_link wpf_checkbox" onclick=\'wpf_remove_login_to_clipboard("'+a+'","normal")\'><label class="wpf_remove_login_label wpf_checkbox_label" for="wpf_remove_login_task_link'+a+'">'+wpf_remove_login_parameter+'</label></div>',j='<div class="wpf_task_link_">',g=current_page_url+'?wpf_taskid='+a+'&wpf_login=1'),c+='<div class="tab-pane" id="sharetasklink-'+a+'" role="tabpanel" aria-labelledby="sharetasklink-tab"><div class="wpf_icon_title">'+wpf_share_task_link+' </div><input type="text" id="wpf_share_link_'+b+'" value="'+g+'" style="position: absolute; z-index: -999; opacity: 0;"><span class="wpf_share_task_link">'+j+g+'</div><a href="javascript:void(0);" onclick=\'wpf_copy_to_clipboard("wpf_share_link_'+b+'")\' class="wpf_copy_task_icon" style="display: inline-block; color: var(--main-wpf-color) !important;"><i class="gg-copy"></i></a><span class="wpf_success_wpf_share_link" id="wpf_success_wpf_share_link_'+b+'" style="display: none;">The link was copied to your clipboard.</span></span>'+i+'</div>',c+='<div class="tab-pane" id="wpfbuser-'+a+'" role="tabpanel" aria-labelledby="home-tab">'+s+'</div>',k='',d.wpf_task_screenshot!=void 0?k='<a target="_blank" href="'+d.wpf_task_screenshot+'" class="wpf_screenshot_img_link"><img src="'+d.wpf_task_screenshot+'" id="screenshot_img_'+a+'" style="margin-top:10px; border:1px solid #dee2e6;padding: 5px;width: 100%;" /></a>':k='<a target="_blank" href="#" class="wpf_screenshot_img_link"><img src="#" id="screenshot_img_'+a+'" style="margin-top:10px; border:1px solid #dee2e6;padding: 5px; display: none;width: 100%;" /></a>',f==1||f==2?(wpf_tab_permission.display_stickers=='yes'?(c+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider"><input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority low_radio" checked><label for="priority_low-'+a+'" class="low_label">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority medium_radio"><label for="priority_medium-'+a+'" class="medium_label">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority high_radio"><label for="priority_high-'+a+'" class="high_label">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority critical_radio"><label for="priority_critical-'+a+'" class="critical_label">'+wpf_priority_critical+'</label></div></div>',c+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider"><input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus open_radio" checked><label for="status_open-'+a+'" class="open_label">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus in_progress_radio" ><label for="status_progress-'+a+'" class="in_progress_label">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus pending_radio" ><label for="status_pending-'+a+'" class="pending_label">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus complete_radio" ><label for="status_complete-'+a+'" class="complete_label">'+wpf_status_complete+'</label></div></div>'):(c+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider"><input id="priority_low-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="low" class="wpfbpriority" checked><label for="priority_low-'+a+'">'+wpf_priority_low+'</label><input id="priority_medium-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="medium" class="wpfbpriority"><label for="priority_medium-'+a+'">'+wpf_priority_medium+'</label><input id="priority_high-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="high" class="wpfbpriority"><label for="priority_high-'+a+'">'+wpf_priority_high+'</label><input id="priority_critical-'+a+'" type="radio" name="wpfbpriority'+a+'" data-elemid="'+a+'" value="critical" class="wpfbpriority"><label for="priority_critical-'+a+'">'+wpf_priority_critical+'</label></div></div>',c+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider"><input id="status_open-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="open" data-elemid="'+a+'" class="wpfbtaskstatus" checked><label for="status_open-'+a+'">'+wpf_status_open_task+'</label><input id="status_progress-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="in-progress" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_progress-'+a+'">'+wpf_status_in_progress+'</label><input id="status_pending-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="pending-review" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_pending-'+a+'">'+wpf_status_pending_review+'</label><input id="status_complete-'+a+'" type="radio" name="wpfbtaskstatus'+a+'" value="complete" data-elemid="'+a+'" class="wpfbtaskstatus" ><label for="status_complete-'+a+'">'+wpf_status_complete+'</label></div></div>'),c+='<div class="tab-pane" id="wpfbscreenshot-'+a+'" role="tabpanel" aria-labelledby="wpfbscreenshot-tab"><a href="javascript:void(0)" onclick="screenshot('+a+');"><div class="wpf_screenshot_button">'+wpf_screenshot_view+'</div></a>'+k+'</div><div  id="task_comments_section_'+a+'"><ul class="wpf_current_chat_box scrollbar-outer" id="task_comments_'+a+'"></ul></div>'):(c+='<div class="tab-pane" id="wpfbpriority-'+a+'" role="tabpanel" aria-labelledby="wpfbpriority-tab"><div class="anim-slider">'+r+'</div></div>',c+='<div class="tab-pane" id="wpfbtaskstatus-'+a+'" role="tabpanel" aria-labelledby="wpfbtaskstatus-tab"><div class="anim-slider">'+q+'</div></div>',c+='<div class="tab-pane" id="wpfbscreenshot-'+a+'" role="tabpanel" aria-labelledby="wpfbscreenshot-tab"><a href="javascript:void(0)" onclick="screenshot('+a+');"><div class="wpf_screenshot_button">'+wpf_screenshot_view+'</div></a>'+k+'</div><div id="task_comments_section_'+a+'"><ul class="wpf_current_chat_box scrollbar-outer" id="task_comments_'+a+'">'+p+'</ul></div>'),c+='</div>',jQuery("#myTab-"+a).after(c)}function close_popover(a){jQuery_WPF('#bubble-'+a).trigger('click',["closed"])}function close_milestone_popup(a){jQuery_WPF("#wpf_site_milestone_wpf_list").hasClass('wpf_active')&&jQuery_WPF("#wpf_site_milestone_wpf_list").removeClass('wpf_active').addClass('wpf_hide')}function openWPFTab(a){jQuery_WPF('.wpf_sidebar_content').hasClass('nothingfound')&&jQuery_WPF('.wpf_sidebar_content').removeClass('nothingfound'),reset_sidebar_filters(),a=='wpf_allpages'?(jQuery_WPF('.wpf_sidebar_content').find('#wpf_thispage').hide(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_backend').hide(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_allpages').show(),jQuery_WPF('button.wpf_tab_sidebar').removeClass('wpf_active'),jQuery_WPF('button.wpf_tab_sidebar.'+a).addClass('wpf_active'),jQuery_WPF('.wpf_sidebar_content .wpf_container').removeClass('wpf_active_filter'),jQuery_WPF('#'+a).addClass('wpf_active_filter'),jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]:checked').prop('checked',!1),jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]:checked').prop('checked',!1),jQuery_WPF('.wpf_container.wpf_active_filter ul li').show(),all_page_tasks_loaded==0&&(all_page_tasks_loaded=1,load_all_page_tasks())):a=='wpf_backend'?(jQuery_WPF('.wpf_sidebar_content').find('#wpf_allpages').hide(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_backend').show(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_thispage').hide(),jQuery_WPF('button.wpf_tab_sidebar').removeClass('wpf_active'),jQuery_WPF('button.wpf_tab_sidebar.'+a).addClass('wpf_active'),jQuery_WPF('.wpf_sidebar_content .wpf_container').removeClass('wpf_active_filter'),jQuery_WPF('#'+a).addClass('wpf_active_filter'),jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]:checked').prop('checked',!1),jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]:checked').prop('checked',!1),jQuery_WPF('.wpf_container.wpf_active_filter ul li').show(),all_backend_tasks_loaded==0&&(all_backend_tasks_loaded=1,load_all_backend_tasks_admin())):(jQuery_WPF('.wpf_sidebar_content').find('#wpf_allpages').hide(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_backend').hide(),jQuery_WPF('.wpf_sidebar_content').find('#wpf_thispage').show(),jQuery_WPF('button.wpf_tab_sidebar').removeClass('wpf_active'),jQuery_WPF('button.wpf_tab_sidebar.'+a).addClass('wpf_active'),jQuery_WPF('.wpf_sidebar_content .wpf_container').removeClass('wpf_active_filter'),jQuery_WPF('#'+a).addClass('wpf_active_filter'),jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]:checked').prop('checked',!1),jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]:checked').prop('checked',!1),jQuery_WPF('.wpf_container.wpf_active_filter ul li').show())}function load_all_page_tasks(){jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'load_wpfb_tasks',wpf_nonce},beforeSend:function(){jQuery_WPF('.wpf_sidebar_loader').show()},success:function(e){var a,b,d,c;if(jQuery_WPF('.wpf_sidebar_loader').hide(),a=JSON.parse(e),b='',a!=null&&a!="null"){const e=Object.keys(a).sort(timeSort);d='',comment_count_initial=Object.keys(a).length,c=JSON.parse(wpfb_users);let f='_'+a[e[0]].class;jQuery_WPF.each(e,function(w,e){var n='',t='',l,h,r,g,v,u,q,j,i,s;wpf_tab_permission.display_stickers=='yes'&&(d='<span class="sticker '+a[e].task_priority+'_custom"></span> '),tasks_on_page[comment_count_initial]=e;let p='';if(wpf_tab_permission.display_task_id!='yes'?p='<i class="gg-check"></i>':p=a[e].site_task_id,a[e].task_status=='complete'?(l=d+p):(l=d+a[e].site_task_id),h=a[e].wpf_tags,r='',g='',v='',h){u=h.length,g='<div class="wpf_task_tags">';const a=Object.keys(h);q=1,jQuery_WPF.each(a,function(b,a){q==1?g+='<span class="wpf_task_tag">'+h[a].name+'</span>':u==q?r+=h[a].name:r+=h[a].name+', ',q++}),h.length>1&&(g+='<span class="wpf_task_tag_more" title="'+r+'">...</span>'),g+='</div>'}let o="";a[e].class!==""&&(o="_"+a[e].class),wpf_tab_permission.display_stickers=='yes'?(j='<div class="wpf_task_label"><span class="task_status wpf_'+a[e].task_status+' wpf_'+a[e].task_status+'_custom" title="Status: '+a[e].task_status+'">'+status_icon+'</span>',i='<span class="priority wpf_'+a[e].task_priority+' wpf_'+a[e].task_priority+'_custom" title="Priority: '+a[e].task_priority+'">'+priority_icon+'</span></div>'):(j='<div class="wpf_task_label"><span class="task_status wpf_'+a[e].task_status+'" title="Status: '+a[e].task_status+'">'+status_icon+'</span>',i='<span class="priority wpf_'+a[e].task_priority+'" title="Priority: '+a[e].task_priority+'">'+priority_icon+'</span></div>');let m='';wpf_tab_permission.display_stickers=='yes'&&(m=a[e].task_status+'_custom'),a[e].task_page_title==null&&(a[e].task_page_title="");for(s in c)if(c.hasOwnProperty(s))if(c[s].username==a[e].task_config_author_name){a[e].task_config_author_name=c[s].displayname;break}let k='';a[e].is_internal&&(k='<span class="wpf_task_type" title="Task type">Internal</span>'),a[e].task_type=='general'?(n='<span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span>',b+='<li class="current_page_task '+m+' '+a[e].task_status+" "+a[e].task_priority+'" data-taskid="'+a[e].wpf_task_id+'" data-postid="'+e+'" data-task_url="'+a[e].task_page_url+'?wpf_general_taskid='+e+'"><div class="wpf_task_number">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a[e].task_config_author_name+'<span>'+a[e].task_time+'</span></level><div class="wpf_task_pagename">'+a[e].task_page_title+'</div><div class="current_page_task_list">'+a[e].task_title+'</div></div>'+k+'<span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+n+j+i+g+'</div></div></li>'):a[e].task_type=='email'?(n='<span class="wpf_task_type" title="Task type">'+wpf_email_tag+'</span>',b+='<li class="current_page_task '+m+' '+a[e].task_status+" "+a[e].task_priority+'" data-taskid="'+a[e].wpf_task_id+'" data-postid="'+e+'" data-task_url="'+a[e].task_page_url+'?wpf_general_taskid='+e+'"><div class="wpf_task_number">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a[e].task_config_author_name+'<span>'+a[e].task_time+'</span></level><div class="wpf_task_pagename">'+a[e].task_page_title+'</div><div class="current_page_task_list">'+a[e].task_title+'</div></div>'+k+'<span class="wpf_task_type" title="Task type">'+wpf_email_tag+'</span><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+n+j+i+g+'</div></div></li>'):a[e].task_type=='graphics'?(t='<span class="wpf_task_type" title="Task type">'+wpf_graphics_tag+'</span>',b+='<li class="current_page_task '+m+' '+a[e].task_status+" "+a[e].task_priority+'" data-taskid="'+a[e].wpf_task_id+'" data-postid="'+e+'" data-task_url="'+a[e].task_page_url+'&wpf_taskid='+a[e].wpf_task_id+'"><div class="wpf_task_number">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a[e].task_config_author_name+'<span>'+a[e].task_time+'</span></level><div class="wpf_task_pagename">'+a[e].task_page_title+'</div><div class="current_page_task_list">'+a[e].task_title+'</div></div>'+k+'<div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+t+j+i+g+'</div></div></li>'):b+='<li class="current_page_task '+m+' '+a[e].task_status+" "+a[e].task_priority+'" data-taskid="'+a[e].wpf_task_id+'" data-task_url="'+a[e].task_page_url+'?wpf_taskid='+a[e].wpf_task_id+'"><div class="wpf_task_number">'+l+'</div><div class="wpf_task_sum"><level class="task-author">'+a[e].task_config_author_name+'<span>'+a[e].task_time+'</span></level><div class="wpf_task_pagename">'+a[e].task_page_title+'</div><div class="current_page_task_list">'+a[e].task_title+'</div></div>'+k+'<div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+j+i+g+'</div></div></li>',jQuery_WPF("#wpf_allpages_container"+o).html(b),f!==o&&(b=''),f=o,comment_count_initial--})}}})}function getDomPath(a){for(var b=[],c,f,g,d,e;a.parentNode!=null;){c=0,f=0,g=/[0-9]{2,}/g;for(d=0;d<a.parentNode.childNodes.length;d++)e=a.parentNode.childNodes[d],e.id!='wpadminbar'&&e.nodeName==a.nodeName&&(e===a&&(f=c),c++);a.nodeName.toLowerCase()!='body'?a.hasAttribute('id')&&a.id!=''&&!g.test(a.id)?b.unshift(a.nodeName.toLowerCase()+'#'+a.id):c>1?b.unshift(a.nodeName.toLowerCase()+':eq('+f+')'):b.unshift(a.nodeName.toLowerCase()):b.unshift(a.nodeName.toLowerCase()),a=a.parentNode}return b.slice(1)}jQuery_WPF.fn.onPositionChanged=function(d,e){var a,b,c;return e==null&&(e=100),a=jQuery_WPF(this[0]),a.length<1?a:(b=null,c=null,setInterval(function(){var e,f;if(a==null||a.length<1)return a;b==null&&(b=a.position()),c==null&&(c=a.offset()),e=a.position(),f=a.offset(),(b.top!=e.top||b.left!=e.left)&&(jQuery_WPF(this).trigger('onPositionChanged',{lastPos:b,newPos:e}),typeof d=="function"&&d(b,e),b=a.position()),(c.top!=f.top||c.left!=f.left)&&(jQuery_WPF(this).trigger('onOffsetChanged',{lastOff:c,newOff:f}),typeof d=="function"&&d(c,f),c=a.offset())},e),a)};function wpf_bubble_tracker(b,a){jQuery_WPF(a).onPositionChanged(function(){setTimeout(function(){var c=getelementcenter(a);c.left=c.left-25,c.top=c.top-25,jQuery_WPF('#bubble-'+b).attr('style','top:'+c.top+'px; left:'+c.left+'px;')},0)})}function trigger_bubble_label(){var a=getParameterByName('wpf_taskid'),b,c;a!=''&&(jQuery_WPF('#wpfb_display_completed_tasks').trigger('click'),b=jQuery_WPF("#wpfb_display_tasks"),b.prop('checked')==!1&&b.prop('checked',!0),wpf_display_tasks(b),setTimeout(function(){jQuery_WPF('body').find('#bubble-'+a).trigger('click')},20),jQuery_WPF("#bubble-"+a).length>0&&jQuery_WPF('html, body').animate({scrollTop:jQuery_WPF("#bubble-"+a).offset().top-200},1e3)),c=getParameterByName('wpf_general_taskid'),c!=''&&wpf_load_general_task(c)}function getParameterByName(a){var c,d,b;return a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),b=d.exec(window.location.href),b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))}function wpf_delete_task(a,b){var c=[],d;c.task_id=b,c.task_no=a,d=jQuery_WPF.extend({},c),jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_delete_task",wpf_nonce,task_info:d},beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(c){jQuery_WPF('#bubble-'+a).trigger('click'),jQuery_WPF('.wpf_general_task_close').trigger('click'),jQuery_WPF('#bubble-'+a).remove(),jQuery_WPF('.wpf_loader_'+a).hide(),jQuery_WPF('#wpf_thispage_container_today [data-taskid="'+a+'"],#wpf_thispage_container_yesterday [data-taskid="'+a+'"],#wpf_thispage_container_this_week [data-taskid="'+a+'"],#wpf_thispage_container_this_month [data-taskid="'+a+'"],#wpf_thispage_container_year [data-taskid="'+a+'"],#wpf_thispage_container_other [data-taskid="'+a+'"]').remove(),jQuery_WPF('#wpf_allpages_container_today [data-taskid="'+a+'"],#wpf_allpages_container_yesterday [data-taskid="'+a+'"],#wpf_allpages_container_this_week [data-taskid="'+a+'"],#wpf_allpages_container_this_month [data-taskid="'+a+'"],#wpf_allpages_container_year [data-taskid="'+a+'"],#wpf_allpages_container_other [data-taskid="'+a+'"]').remove(),onload_wpfb_tasks[b]!=null&&jQuery_WPF(onload_wpfb_tasks[b].task_element_path).removeClass('wpfb_task_bubble')}})}function wpf_send_report(a){jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpf_send_email_report",wpf_nonce,type:a,forced:"yes"},beforeSend:function(){jQuery_WPF('.wpf_sidebar_loader').show()},success:function(a){jQuery_WPF('.wpf_sidebar_loader').hide(),jQuery_WPF('#wpf_front_report_sent_span').css("display","block"),setTimeout(function(){jQuery_WPF('#wpf_front_report_sent_span').hide()},3e3)}})}function wpf_upload_file(e){var a=jQuery_WPF(e).attr('data-elemid'),f=[],d=jQuery_WPF('#wpf_uploadfile_'+a)[0].files[0],c=tasks_on_page[a],g='',b=new FormData;b.append('action','wpf_upload_file'),b.append('wpf_nonce',wpf_nonce),b.append("wpf_taskid",c),b.append("wpf_upload_file",d),b.append('task_config_author_name',current_user_name),c>0?jQuery_WPF.ajax({type:'POST',url:ajaxurl,data:b,contentType:!1,processData:!1,beforeSend:function(){jQuery_WPF('.wpf_loader_'+a).show()},success:function(e){var b=JSON.parse(e),c,d;jQuery_WPF('.wpf_loader_'+a).hide(),b.status==-1&&(jQuery_WPF('.wpf_comment_container').removeClass('wpf_hide'),jQuery_WPF('.wpf_info_block').addClass('wpf_hide'),jQuery_WPF('.wpf_general_task_close').addClass('wpf_hide'),jQuery_WPF('#wpf_general_comment').addClass('wpf_hide')),b.status==1?(jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('#wpf_task_error_'+a).hide(),jQuery_WPF("input[name=wpf_uploadfile_"+a+"]").val(''),b.type!=1&&(img_dwn_icon=""),b.type==1?(img_dwn_icon="<span id='wpf_push_media' class='wpf_push_media wpf_image_download'>"+push_to_media_icon+"</span><span id='wpf_image_download' class='wpf_image_download' onclick='wpf_image_download_action(this)'>"+image_download_icon+"</span><span id='' class='wpf_image_open' onclick='wpf_image_open_new_tab(this)'>"+image_open_icon+"</span><span class='wpf_image_delete' onclick='wpf_task_image_delete(this)'>"+image_close_icon+"</span>",c='<li class="wpf_author is_image" data-comment_id="'+b.comment_id+'"><level class="task-author">'+current_user_name+'</level><div class="meassage_area_main">'+img_dwn_icon+'<a target="_blank" href="'+b.message+'"><img src="'+b.message+'"></a></div></li>'):(d=b.message.split("/").pop(),c='<li class="wpf_author"><level class="task-author">'+current_user_name+' '+wpf_just_now+'</level><div class="meassage_area_main">'+img_dwn_icon+'<a href="'+b.message+'" download="'+d+'" target="_blank"><i class="gg-software-download"></i> '+d+'</a></div></li>'),jQuery_WPF('#task_comments_'+a).append(c),jQuery_WPF('#task_comments_'+a).animate({scrollTop:jQuery_WPF('#task_comments_'+a).prop("scrollHeight")},2e3)):(jQuery_WPF('#wpf_upload_error_'+a).show(),jQuery_WPF("input[name=wpf_uploadfile_"+a+"]").val(''),setTimeout(function(){jQuery_WPF('#wpf_upload_error_'+a).hide()},5e3))}}):(jQuery_WPF('#wpf_error_'+a).hide(),jQuery_WPF('#wpf_task_error_'+a).show(),jQuery_WPF("input[name=wpf_uploadfile_"+a+"]").val(''))}jQuery_WPF(document).ready(function(){jQuery_WPF('input[name="wpf_user_type"]').on('click',function(){var a=jQuery_WPF('input[name="wpf_user_type"]:checked').val();return jQuery_WPF.ajax({method:'POST',url:ajaxurl,data:{action:'wpf_update_current_user_first_step',wpf_nonce,current_user_id,wpf_user_type:a},beforeSend:function(){jQuery_WPF('.wpf_loader_wizard').show()},success:function(a){jQuery_WPF('.wpf_loader_wizard').hide(),a==1&&(jQuery_WPF('#wpf_wizard_role').hide(),jQuery_WPF('#wpf_wizard_final').show())}}),!1}),jQuery_WPF('#wpf_wizard_done_button').on('click',function(a){return lets_start='',jQuery_WPF.ajax({url:ajaxurl,method:'POST',data:{action:'wpf_update_current_user_sec_step',current_user_id,lets_start:1},beforeSend:function(){jQuery_WPF('.wpf_loader_wizard').show()},success:function(a){wpf_app_script_object.wpf_frontend_user?window.location=window.location.href+'&wpf-task=true':window.location=window.location.href}}),!1})});function wpf_new_general_task(f){var b,c,a,d,e;if(disable_comment(),f==0){tasks_on_page[comment_count]=0,b=JSON.parse(wpfb_users),c='<ul class="wp_feedback_filter_checkbox user">';for(a in b)b.hasOwnProperty(a)&&(d=b[a].displayname,current_user_id==a||wpf_website_builder==a?c+='<li><input type="checkbox" name="author_list_'+comment_count+'" value="'+a+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+comment_count+'" id="author_list_'+comment_count+'_'+a+'" data-wp-usrn="'+b[a].username+'" checked><label for="author_list_'+comment_count+'_'+a+'" class="wpf_checkbox_label">'+d+'</label></li>':c+='<li><input type="checkbox" name="author_list_'+comment_count+'" value="'+a+'" class="wp_feedback_task wpfbtasknotifyusers wpf_checkbox" data-elemid="'+comment_count+'" id="author_list_'+comment_count+'_'+a+'" data-wp-usrn="'+b[a].username+'"><label for="author_list_'+comment_count+'_'+a+'" class="wpf_checkbox_label">'+d+'</label></li>');c+='</ul>',e=wpf_task_popover_html(2,comment_count,0,'',c,'','','',1),jQuery_WPF('#wpf_general_comment_tabs').html(e),setTimeout(function(){jQuery_WPF('#comment-'+comment_count).focus()},100),jQuery_WPF('#wpfbsysinfo-'+comment_count+' .wpf_tag_autocomplete').hide(),jQuery_WPF('#wpfbsysinfo-'+comment_count+' .wpf_icon_title').hide(),jQuery_WPF('#sharetasklink-tab-'+comment_count).show(),jQuery_WPF('#wpf_general_comment').show(),jQuery_WPF("#wpf_uploadfile_"+comment_count).change(function(){wpf_upload_file(this)}),jQuery_WPF(document).find('.wpf_task_temp_delete_btn').click(function(){var a=jQuery_WPF(this).data('btn_elemid');jQuery_WPF('.wpfbsysinfo_temp_delete_task_id_'+a).show()}),jQuery_WPF('.wpf_task_temp_delete').click(function(){var a=jQuery_WPF(this).data('elemid');jQuery_WPF('#wpf_general_comment .wpf_general_task_close').trigger('click')})}}function wpf_load_general_task(a){var b=1;jQuery_WPF.ajax({url:ajaxurl,method:'POST',data:{action:'load_wpfb_tasks',wpf_nonce,task_id:a,page_type},beforeSend:function(){jQuery_WPF('.wpf_sidebar_loader').show()},success:function(e){var c,d,a;jQuery_WPF('.wpf_sidebar_loader').hide(),c=JSON.parse(e),d=Object.keys(c)[0],a=c[d],wpf_generate_general_task_html(d,a,b),jQuery_WPF('#wpf_general_comment').show(),setTimeout(function(){jQuery_WPF('#comment-'+a.task_comment_id).focus()},100),jQuery_WPF("#wpf_uploadfile_"+a.task_comment_id).change(function(){wpf_upload_file(this)}),wpf_initiate_task_features()}})}function wpf_initiate_task_features(){jQuery_WPF('.wpfbpriority').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_prioirty(b),console.log("p4"),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtaskstatus').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');jQuery_WPF(this).closest('.popover').prop('id')?current_popup=jQuery_WPF(this).closest('.popover'):current_popup=jQuery_WPF(this).closest('#wpf_general_comment_tabs'),set_task_status(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpfbtasknotifyusers').click(function(a){var b=jQuery_WPF(this).attr('data-elemid');current_popup=jQuery_WPF(this).closest('.popover'),set_task_notify_users(b),a.stopImmediatePropagation()}),jQuery_WPF('.wpf_task_delete_btn').click(function(){var a=jQuery_WPF(this).data('btn_taskid');jQuery_WPF('.wpfbsysinfo_delete_task_id_'+a).show()}),jQuery_WPF('.wpf_task_delete').click(function(a){var b=jQuery_WPF(this).data('elemid'),c=jQuery_WPF(this).data('taskid');current_popup=jQuery_WPF(this).closest('.popover'),wpf_delete_task(b,c),a.stopImmediatePropagation()})}function load_all_backend_tasks_admin(){var a='';jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:'load_wpfb_tasks_admin',wpf_nonce,wpf_current_screen:a,all_page:1,from_frontend:1},beforeSend:function(){jQuery_WPF('.wpf_sidebar_loader').show()},success:function(d){var a,b,c;if(jQuery_WPF('.wpf_sidebar_loader').hide(),a=JSON.parse(d),b='',c=JSON.parse(wpfb_users),a!=null&&a!="null"){const d=Object.keys(a).sort(timeSort);comment_count_initial=Object.keys(a).length;let e='_'+a[d[0]].class;jQuery_WPF.each(d,function(z,d){var u='',k,f,m,g,y,v,r,s,j,q,w,x,i,p;tasks_on_page[comment_count_initial]=d;let o='',n='';wpf_tab_permission.display_stickers=='yes'&&(n=a[d].task_status+'_custom'),wpf_tab_permission.display_stickers=='yes'&&(o='<span class="sticker '+a[d].task_priority+'_custom"></span> ');let l='';wpf_tab_permission.display_task_id!='yes'?l='<i class="gg-check"></i>':l=a[d].site_task_id,a[d].task_status=='complete'?(k=o+l):(k=o+a[d].site_task_id),f=a[d].wpf_tags,m='',g='',y='';let h="";if(a[d].class!==""&&(h="_"+a[d].class),f){v=f.length,g='<div class="wpf_task_tags">';const a=Object.keys(f);r=1,jQuery_WPF.each(a,function(b,a){r==1?g+='<span class="wpf_task_tag">'+f[a].name+'</span>':v==r?m+=f[a].name:m+=f[a].name+', ',r++}),f.length>1&&(g+='<span class="wpf_task_tag_more" title="'+m+'">...</span>'),g+='</div>'}wpf_tab_permission.display_stickers=='yes'?(s='<div class="wpf_task_label"><span class="task_status wpf_'+a[d].task_status+' wpf_'+a[d].task_status+'_custom" title="Status: '+a[d].task_status+'">'+status_icon+'</span>',j='<span class="priority wpf_'+a[d].task_priority+' wpf_'+a[d].task_priority+'_custom" title="Priority: '+a[d].task_priority+'">'+priority_icon+'</span></div>'):(s='<div class="wpf_task_label"><span class="task_status wpf_'+a[d].task_status+'" title="Status: '+a[d].task_status+'">'+status_icon+'</span>',j='<span class="priority wpf_'+a[d].task_priority+'" title="Priority: '+a[d].task_priority+'">'+priority_icon+'</span></div>'),q=a[d].task_page_url,q&&(w=q.split('&')[1],x=q.split('?')[1],w&&(i='&'),x?(i='&'):(i='?')),a[d].task_page_title==null&&(a[d].task_page_title="");for(p in c)if(c.hasOwnProperty(p))if(c[p].username==a[d].task_config_author_name){a[d].task_config_author_name=c[p].displayname;break}let t='';a[d].is_internal&&(t='<span class="wpf_task_type" title="Task type">Internal</span>'),a[d].task_type=='general'?(u='<span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span>',b+='<li class="current_page_task  '+a[d].task_status+" "+n+" "+a[d].task_priority+'" data-taskid="'+a[d].wpf_task_id+'" data-postid="'+d+'" data-task_url="'+a[d].task_page_url+i+'wpf_general_taskid='+d+'"><div class="wpf_task_number">'+k+'</div><div class="wpf_task_sum"><level class="task-author">'+a[d].task_config_author_name+'<span>'+a[d].task_time+'</span></level><div class="wpf_task_pagename">'+a[d].task_page_title+'</div><div class="current_page_task_list">'+a[d].task_title+'</div></div>'+t+'<span class="wpf_task_type" title="Task type">'+wpf_general_tag+'</span><div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+u+s+j+g+'</div></div></li>'):b+='<li class="current_page_task  '+a[d].task_status+" "+n+" "+a[d].task_priority+'" data-taskid="'+a[d].wpf_task_id+'"  data-task_url="'+a[d].task_page_url+i+'wpf_taskid='+a[d].wpf_task_id+'"><div class="wpf_task_number">'+k+'</div><div class="wpf_task_sum"><level class="task-author">'+a[d].task_config_author_name+'<span>'+a[d].task_time+'<span></level><div class="wpf_task_pagename">'+a[d].task_page_title+'</div><div class="current_page_task_list">'+a[d].task_title+'</div></div>'+t+'<div class="wpf_task_meta"><div class="wpf_task_meta_icon"><i class="gg-chevron-left"></i></div><div class="wpf_task_meta_details">'+s+j+g+'</div></div></li>',jQuery_WPF("#wpf_backend_container"+h).html(b),e!==h&&(b=''),e=h,comment_count_initial--})}}})}function wpf_show(a){jQuery_WPF('.wpf_sidebar_content input[name="wpf_filter_task_status"]:checked').prop('checked',!1),jQuery_WPF('.wpf_sidebar_content input[name="wpf_filter_task_priority"]:checked').prop('checked',!1),jQuery_WPF('.wpf_sidebar_filter').find('.wpf_filter').removeClass("wpf_active"),a=='wpf_filter_taskstatus'&&(jQuery_WPF('.wpf_filter_taskstatus').addClass("wpf_active"),jQuery_WPF('ul#wpf_backend_container li').show(),jQuery_WPF('#wpf_filter_taskstatus').show(),jQuery_WPF('#wpf_filter_taskpriority').hide()),a=='wpf_filter_taskpriority'&&(jQuery_WPF('.wpf_filter_taskpriority').addClass("wpf_active"),jQuery_WPF('ul#wpf_backend_container li').show(),jQuery_WPF('#wpf_filter_taskpriority').show(),jQuery_WPF('#wpf_filter_taskstatus').hide())}jQuery_WPF(document).ready(function(){jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]').click(function(){jQuery_WPF('.wpf_container.wpf_active_filter ul li').hide();var a=[];jQuery_WPF.each(jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]:checked'),function(){jQuery_WPF('.wpf_container.wpf_active_filter .'+jQuery_WPF(this).val()).show(),a.push(jQuery_WPF(this).val()),a.length===0?jQuery_WPF('.wpf_container.wpf_active_filter ul li.no_task_found').show():jQuery_WPF('.wpf_container.wpf_active_filter ul li.no_task_found').hide()}),a.length===0&&jQuery_WPF('.wpf_container.wpf_active_filter ul li').show()}),jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]').click(function(){jQuery_WPF('.wpf_container.wpf_active_filter ul li').hide();var a=[];jQuery_WPF.each(jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]:checked'),function(){jQuery_WPF('.wpf_container.wpf_active_filter .'+jQuery_WPF(this).val()).show(),a.push(jQuery_WPF(this).val())}),a.length===0&&jQuery_WPF('.wpf_container.wpf_active_filter ul li').show()}),jQuery_WPF('#wpf_filter_taskstatus .wpf_sidebar_filter_reset_task_status').click(function(){jQuery_WPF('#wpf_sidebar_filter_task_status input[name="wpf_filter_task_status"]:checked').prop('checked',!1),jQuery_WPF('.wpf_container.wpf_active_filter ul li').show()}),jQuery_WPF('#wpf_filter_taskpriority .wpf_sidebar_filter_reset_task_priority').click(function(){jQuery_WPF('#wpf_sidebar_filter_task_priority input[name="wpf_filter_task_priority"]:checked').prop('checked',!1),jQuery_WPF('.wpf_container.wpf_active_filter ul li').show()})});function wpf_is_valid_url(a){return!!(regexp=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/,regexp.test(a))}function wpf_is_valid_video_url(b){var c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,a=b.match(c);return a&&a[2].length==11?'<iframe width="100%" height="120" src="https://www.youtube.com/embed/'+a[2]+'" type="text/html" width="500" height="265" frameborder="0" allowfullscreen></iframe>':b}function wpf_reconnect_task(b,c,a,d){new_task.task_element_path=a,new_task.task_clean_dom_elem_path=temp_tasks[id].wpf_clean_dom_elem_path}function wpf_submit_tags(b,a){var c=jQuery_WPF('#wpfeedback_tags_'+a).val()}function wpf_search_tags(b,a){wpf_tag_initialized[a]||(wpf_tag_autocomplete(document.getElementById("wpfeedback_tags_"+a),wpf_all_tags),wpf_tag_initialized[a]=!0)}function wpf_add_tag(b){var c=jQuery_WPF('#'+b).val(),a=jQuery_WPF('#'+b).data('id'),d=jQuery_WPF('#'+b).data('commentid'),e=[],f;e.wpf_task_tag_name=c,e.wpf_task_id=a,f=jQuery_WPF.extend({},e),b!=''&&c!=''&&jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_set_task_tag",wpf_nonce,wpf_task_tag_info:f},beforeSend:function(){jQuery_WPF('.wpf_loader_'+d).show()},success:function(e){var b=JSON.parse(e);wpf_all_tags.indexOf(b.wpf_task_tag_name)===-1?wpf_all_tags.push(b.wpf_task_tag_name):0,b.wpf_tag_type!='already_exit'?(jQuery_WPF('#wpfeedback_tags_'+a).attr('style','border: 1px solid #ccc;'),jQuery_WPF('.wpf_loader_'+d).hide(),jQuery_WPF('#wpfeedback_tags_'+a).val(''),jQuery_WPF('#all_tag_list_'+a).append("<span class='wpf_tag_name "+b.wpf_task_tag_slug+"'>"+b.wpf_task_tag_name+"<a href='javascript:void(0)' onclick='wpf_delete_tag(\""+b.wpf_task_tag_name+'","'+b.wpf_task_tag_slug+'",'+a+")'><i class='gg-close-o'></i></a></span>")):(alert('The tag "'+c+'" already exists for this task'),jQuery_WPF('#wpfeedback_tags_'+a).attr('style','border: 1px solid red;'),jQuery_WPF('.wpf_loader_'+d).hide())}})}function wpf_delete_tag(d,a,b){var c=[],e;c.wpf_task_tag_slug=a,c.wpf_task_tag_name=d,c.wpf_task_id=b,e=jQuery_WPF.extend({},c),b!=''&&a!=''&&jQuery_WPF.ajax({method:"POST",url:ajaxurl,data:{action:"wpfb_delete_task_tag",wpf_nonce,wpf_task_tag_info:e},beforeSend:function(){jQuery_WPF('.wpf_loader').show()},success:function(c){jQuery_WPF('.wpf_loader').hide();var d=JSON.parse(c);d.wpf_msg==1&&(jQuery_WPF('#all_tag_list_'+b+' .'+a).remove(),jQuery_WPF(document).find('#wpf_general_comment  #all_tag_list_'+b+' .'+a).remove())}})}function wpf_tag_autocomplete(b,c){var a;if(b){b.addEventListener("input",function(i){var g,f,e,h=this.value;if(d(),!h)return!1;a=-1,g=document.createElement("DIV"),g.setAttribute("id",this.id+"wpf_tag_autocomplete-list"),g.setAttribute("class","wpf_tag_autocomplete-items"),this.parentNode.appendChild(g);for(e=0;e<c.length;e++)c[e].substr(0,h.length).toUpperCase()==h.toUpperCase()&&(f=document.createElement("DIV"),f.innerHTML="<span>"+c[e].substr(0,h.length)+"</span>",f.innerHTML+=c[e].substr(h.length),f.innerHTML+="<input type='hidden' value='"+c[e]+"'>",f.addEventListener("click",function(a){b.value=this.getElementsByTagName("input")[0].value,d()}),g.appendChild(f))}),b.addEventListener("keydown",function(c){var b=document.getElementById(this.id+"wpf_tag_autocomplete-list");b&&(b=b.getElementsByTagName("DIV")),c.keyCode==40?(a++,e(b),jQuery_WPF("#"+this.id+"wpf_tag_autocomplete-list").animate({scrollTop:jQuery_WPF(".wpf_tag_autocomplete-active").position().top})):c.keyCode==38?(a--,e(b),jQuery_WPF("#"+this.id+"wpf_tag_autocomplete-list").animate({scrollTop:-jQuery_WPF(".wpf_tag_autocomplete-active").position().top})):c.keyCode==13&&(c.preventDefault(),a>-1&&b&&b[a].click(),wpf_add_tag(this.id))});function e(b){if(!b)return!1;f(b),a>=b.length&&(a=0),a<0&&(a=b.length-1),b[a].classList.add("wpf_tag_autocomplete-active")}function f(b){for(var a=0;a<b.length;a++)b[a].classList.remove("wpf_tag_autocomplete-active")}function d(d){for(var c=document.getElementsByClassName("wpf_tag_autocomplete-items"),a=0;a<c.length;a++)d!=c[a]&&d!=b&&c[a].parentNode.removeChild(c[a])}document.addEventListener("click",function(a){d(a.target)})}}function wpf_remove_login_to_clipboard(a,c){var b;document.getElementById('wpf_remove_login_task_link'+a).checked?c=='general'?(b=current_page_url+'?wpf_general_taskid='+a,jQuery_WPF(document).find('#wpf_share_link_'+a).val(b),jQuery_WPF(document).find('.wpf_task_link_'+a).text(b)):(b=current_page_url+'?wpf_taskid='+a,jQuery_WPF('#sharetasklink-'+a+' input[type="text"]').val(b),jQuery_WPF(document).find('.wpf_task_link_'+a).text(b)):c=='general'?(b=current_page_url+'?wpf_general_taskid='+a+'&wpf_login=1',jQuery_WPF(document).find('#wpf_share_link_'+a).val(b),jQuery_WPF(document).find('.wpf_task_link_'+a).text(b)):(b=current_page_url+'?wpf_taskid='+a+'&wpf_login=1',jQuery_WPF('#sharetasklink-'+a+' input[type="text"]').val(b),jQuery_WPF(document).find('.wpf_task_link_'+a).text(b))}function display_no_task_li(){setTimeout(function(){jQuery_WPF('#wpf_thispage_container_today li').length==0&&jQuery_WPF('#wpf_thispage_container_today').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_thispage_container_yesterday li').length==0&&jQuery_WPF('#wpf_thispage_container_yesterday').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_thispage_container_this_week li').length==0&&jQuery_WPF('#wpf_thispage_container_this_week').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_thispage_container_this_month li').length==0&&jQuery_WPF('#wpf_thispage_container_this_month').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_thispage_container_year li').length==0&&jQuery_WPF('#wpf_thispage_container_year').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_thispage_container_other li').length==0&&jQuery_WPF('#wpf_thispage_container_other').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_today li').length==0&&jQuery_WPF('#wpf_allpages_container_today').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_yesterday li').length==0&&jQuery_WPF('#wpf_allpages_container_yesterday').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_this_week li').length==0&&jQuery_WPF('#wpf_allpages_container_this_week').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_this_month li').length==0&&jQuery_WPF('#wpf_allpages_container_this_month').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_year li').length==0&&jQuery_WPF('#wpf_allpages_container_year').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_allpages_container_other li').length==0&&jQuery_WPF('#wpf_allpages_container_other').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_today li').length==0&&jQuery_WPF('#wpf_backend_container_today').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_yesterday li').length==0&&jQuery_WPF('#wpf_backend_container_yesterday').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_this_week li').length==0&&jQuery_WPF('#wpf_backend_container_this_week').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_this_month li').length==0&&jQuery_WPF('#wpf_backend_container_this_month').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_year li').length==0&&jQuery_WPF('#wpf_backend_container_year').append('<li class="no_task_found">No Task Found!</li>'),jQuery_WPF('#wpf_backend_container_other li').length==0&&jQuery_WPF('#wpf_backend_container_other').append('<li class="no_task_found">No Task Found!</li>')},3e3)}